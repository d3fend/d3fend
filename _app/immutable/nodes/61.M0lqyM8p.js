import{s as te,A as ce,k as E,i as h,o as ue,c as _e,e as y,b as D,d as M,f as P,j as O,w as b,N as x,C as ae,l as w,u as he,g as be,a as ge,a1 as Ee,I as Ke,al as Yl,t as G,h as K,H as mt,p as B,m as De,y as de,Q as _t,z as xl,n as j,x as Le,v as ye,M as Ce,am as nt,an as kl,q as wl,r as F,V as we,Y as El,$ as ut,O as ht,P as bt,a2 as gt,a3 as $t,a0 as en,_ as pt,a4 as Je,ao as yl,ap as tn,W as ln,T as nn}from"../chunks/scheduler.rYb7pZZG.js";import{h as vt,u as sn}from"../chunks/await_block.-eayCJv5.js";import{S as le,i as ne,t as v,g as W,a as k,e as X,p as ke,c as S,b as V,m as z,d as L,h as st,j as Ml,f as rn}from"../chunks/index.DuGWJhq4.js";import{p as on}from"../chunks/stores.CeV6jFzo.js";import{b as an,g as ot}from"../chunks/entry.8gGhBGir.js";import{s as cn,L as fn,J as un}from"../chunks/dialog.AQTJbcF_.js";import{w as He,d as dn}from"../chunks/index.WEqpRfbK.js";import{s as tt,a as Me,f as Qe}from"../chunks/index.aT44rMVf.js";import{l as Y,c as dt,m as pn}from"../chunks/layers.Z2c8UUPp.js";import{e as Te}from"../chunks/each.shjUScpc.js";/* empty css                             */import{S as Q,M as re,P as ze}from"../chunks/consts.QPsW3-wB.js";import{a as Ge,T as mn}from"../chunks/updateDefendTree.HAcxH5O7.js";import{g as _n}from"../chunks/spread.rEx3vLA9.js";import{S as hn}from"../chunks/SimpleAutocomplete.5lHfAqj5.js";import{D as bn}from"../chunks/D3FMatrix.9wZrn0hk.js";import{T as gn}from"../chunks/Title.-2iHfz2o.js";import{T as $n}from"../chunks/Technique.jmdJ_uhB.js";const Ct=(n,e=[])=>{let l=()=>{};for(let{query:t,transition:i,...s}of e)if(window.matchMedia(t).matches)return i(n,s);return l},vn=n=>({}),kt=n=>({id:"drawer-content"}),Cn=n=>({}),wt=n=>({}),kn=n=>({}),Et=n=>({id:"matrix-slot"});function yt(n){let e,l,t,i,s;const r=n[2].matrix,o=_e(r,n,n[1],Et),a=n[2].legend,c=_e(a,n,n[1],wt);let f=n[0].isDrawerOpen&&Mt(n);return{c(){e=y("main"),l=y("section"),o&&o.c(),t=D(),c&&c.c(),i=D(),f&&f.c(),this.h()},l(u){e=M(u,"MAIN",{style:!0,class:!0});var p=P(e);l=M(p,"SECTION",{id:!0,class:!0});var m=P(l);o&&o.l(m),t=O(m),c&&c.l(m),m.forEach(h),i=O(p),f&&f.l(p),p.forEach(h),this.h()},h(){b(l,"id","container-matrix"),b(l,"class","svelte-mlvs39"),x(l,"expand-matrix",n[0].isDrawerOpen),ae(e,"--drawer-width",En),ae(e,"--ANIMATION_TIMING",xe),b(e,"class","svelte-mlvs39")},m(u,p){E(u,e,p),w(e,l),o&&o.m(l,null),w(l,t),c&&c.m(l,null),w(e,i),f&&f.m(e,null),s=!0},p(u,p){o&&o.p&&(!s||p&2)&&he(o,r,u,u[1],s?ge(r,u[1],p,kn):be(u[1]),Et),c&&c.p&&(!s||p&2)&&he(c,a,u,u[1],s?ge(a,u[1],p,Cn):be(u[1]),wt),(!s||p&1)&&x(l,"expand-matrix",u[0].isDrawerOpen),u[0].isDrawerOpen?f?(f.p(u,p),p&1&&v(f,1)):(f=Mt(u),f.c(),v(f,1),f.m(e,null)):f&&(W(),k(f,1,1,()=>{f=null}),X())},i(u){s||(v(o,u),v(c,u),v(f),s=!0)},o(u){k(o,u),k(c,u),k(f),s=!1},d(u){u&&h(e),o&&o.d(u),c&&c.d(u),f&&f.d()}}}function Mt(n){let e,l,t;const i=n[2].drawer,s=_e(i,n,n[1],kt);return{c(){e=y("aside"),s&&s.c(),this.h()},l(r){e=M(r,"ASIDE",{id:!0,class:!0});var o=P(e);s&&s.l(o),o.forEach(h),this.h()},h(){b(e,"id","container-drawer"),b(e,"class","svelte-mlvs39"),x(e,"drawer-closed",!n[0].isDrawerOpen)},m(r,o){E(r,e,o),s&&s.m(e,null),t=!0},p(r,o){n=r,s&&s.p&&(!t||o&2)&&he(s,i,n,n[1],t?ge(i,n[1],o,vn):be(n[1]),kt),(!t||o&1)&&x(e,"drawer-closed",!n[0].isDrawerOpen)},i(r){t||(v(s,r),r&&Ee(()=>{t&&(l||(l=ke(e,Ct,[{query:"(min-width: 501px)",transition:tt,duration:xe,axis:"x"},{query:"(max-width: 500px), screen and (orientation: portrait)",transition:tt,duration:xe,axis:"y"}],!0)),l.run(1))}),t=!0)},o(r){k(s,r),r&&(l||(l=ke(e,Ct,[{query:"(min-width: 501px)",transition:tt,duration:xe,axis:"x"},{query:"(max-width: 500px), screen and (orientation: portrait)",transition:tt,duration:xe,axis:"y"}],!1)),l.run(0)),t=!1},d(r){r&&h(e),s&&s.d(r),r&&l&&l.end()}}}function wn(n){let e,l,t=n[0]&&yt(n);return{c(){t&&t.c(),e=ce()},l(i){t&&t.l(i),e=ce()},m(i,s){t&&t.m(i,s),E(i,e,s),l=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&v(t,1)):(t=yt(i),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),k(t,1,1,()=>{t=null}),X())},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d(i)}}}const ve=He({}),xe=1e3;let En="25vw";function yn(n,e,l){let t;ue(n,Y,r=>l(0,t=r));let{$$slots:i={},$$scope:s}=e;return n.$$set=r=>{"$$scope"in r&&l(1,s=r.$$scope)},[t,s,i]}class Mn extends le{constructor(e){super(),ne(this,e,yn,wn,te,{})}}function Tt(n,e,l){const t=n.slice();return t[9]=e[l],t[11]=l,t}function Nt(n,e,l){const t=n.slice();return t[9]=e[l],t}const Tn=n=>({}),It=n=>({});function Pt(n){let e,l;const t=n[6].header,i=_e(t,n,n[5],It);return{c(){e=y("div"),i&&i.c(),this.h()},l(s){e=M(s,"DIV",{id:!0,class:!0});var r=P(e);i&&i.l(r),r.forEach(h),this.h()},h(){b(e,"id","header"),b(e,"class","svelte-12bfztt")},m(s,r){E(s,e,r),i&&i.m(e,null),l=!0},p(s,r){i&&i.p&&(!l||r&32)&&he(i,t,s,s[5],l?ge(t,s[5],r,Tn):be(s[5]),It)},i(s){l||(v(i,s),l=!0)},o(s){k(i,s),l=!1},d(s){s&&h(e),i&&i.d(s)}}}function Dt(n){let e,l,t=n[9].label+"",i,s,r,o,a;function c(...u){return n[7](n[9],...u)}function f(...u){return n[8](n[9],...u)}return{c(){e=y("li"),l=y("span"),i=G(t),s=D(),this.h()},l(u){e=M(u,"LI",{class:!0});var p=P(e);l=M(p,"SPAN",{role:!0,tabindex:!0,class:!0});var m=P(l);i=K(m,t),m.forEach(h),s=O(p),p.forEach(h),this.h()},h(){b(l,"role","menuitem"),b(l,"tabindex","0"),b(l,"class","svelte-12bfztt"),b(e,"class",r=mt(n[1]===n[9].value?"active":"")+" svelte-12bfztt")},m(u,p){E(u,e,p),w(e,l),w(l,i),w(e,s),o||(a=[B(l,"click",c),B(l,"keydown",f)],o=!0)},p(u,p){n=u,p&1&&t!==(t=n[9].label+"")&&De(i,t),p&3&&r!==(r=mt(n[1]===n[9].value?"active":"")+" svelte-12bfztt")&&b(e,"class",r)},d(u){u&&h(e),o=!1,de(a)}}}function Ot(n){let e,l,t,i,s,r;var o=n[9].component;function a(c,f){return{props:{component:c[0][c[11]]}}}return o&&(l=_t(o,a(n))),{c(){e=y("div"),l&&S(l.$$.fragment),t=D(),this.h()},l(c){e=M(c,"DIV",{class:!0});var f=P(e);l&&V(l.$$.fragment,f),t=O(f),f.forEach(h),this.h()},h(){b(e,"class","tab svelte-12bfztt")},m(c,f){E(c,e,f),l&&z(l,e,null),w(e,t),r=!0},p(c,f){if(f&1&&o!==(o=c[9].component)){if(l){W();const u=l;k(u.$$.fragment,1,0,()=>{L(u,1)}),X()}o?(l=_t(o,a(c)),S(l.$$.fragment),v(l.$$.fragment,1),z(l,e,t)):l=null}else if(o){const u={};f&1&&(u.component=c[0][c[11]]),l.$set(u)}},i(c){r||(l&&v(l.$$.fragment,c),c&&Ee(()=>{r&&(s&&s.end(1),i=st(e,Me,{duration:400,delay:400}),i.start())}),r=!0)},o(c){l&&k(l.$$.fragment,c),i&&i.invalidate(),c&&(s=Ml(e,Me,{duration:400})),r=!1},d(c){c&&h(e),l&&L(l),c&&s&&s.end()}}}function St(n){let e,l,t=n[1]===n[9].value&&Ot(n);return{c(){t&&t.c(),e=ce()},l(i){t&&t.l(i),e=ce()},m(i,s){t&&t.m(i,s),E(i,e,s),l=!0},p(i,s){i[1]===i[9].value?t?(t.p(i,s),s&3&&v(t,1)):(t=Ot(i),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),k(t,1,1,()=>{t=null}),X())},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d(i)}}}function Nn(n){let e,l,t,i,s,r=n[4].header&&Pt(n),o=Te(n[0]),a=[];for(let p=0;p<o.length;p+=1)a[p]=Dt(Nt(n,o,p));let c=Te(n[0]),f=[];for(let p=0;p<c.length;p+=1)f[p]=St(Tt(n,c,p));const u=p=>k(f[p],1,1,()=>{f[p]=null});return{c(){e=y("section"),r&&r.c(),l=D(),t=y("ul");for(let p=0;p<a.length;p+=1)a[p].c();i=D();for(let p=0;p<f.length;p+=1)f[p].c();this.h()},l(p){e=M(p,"SECTION",{id:!0,class:!0});var m=P(e);r&&r.l(m),l=O(m),t=M(m,"UL",{class:!0});var _=P(t);for(let d=0;d<a.length;d+=1)a[d].l(_);_.forEach(h),i=O(m);for(let d=0;d<f.length;d+=1)f[d].l(m);m.forEach(h),this.h()},h(){b(t,"class","svelte-12bfztt"),b(e,"id","tabs--container"),b(e,"class","svelte-12bfztt")},m(p,m){E(p,e,m),r&&r.m(e,null),w(e,l),w(e,t);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(t,null);w(e,i);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);s=!0},p(p,[m]){if(p[4].header?r?(r.p(p,m),m&16&&v(r,1)):(r=Pt(p),r.c(),v(r,1),r.m(e,l)):r&&(W(),k(r,1,1,()=>{r=null}),X()),m&15){o=Te(p[0]);let _;for(_=0;_<o.length;_+=1){const d=Nt(p,o,_);a[_]?a[_].p(d,m):(a[_]=Dt(d),a[_].c(),a[_].m(t,null))}for(;_<a.length;_+=1)a[_].d(1);a.length=o.length}if(m&3){c=Te(p[0]);let _;for(_=0;_<c.length;_+=1){const d=Tt(p,c,_);f[_]?(f[_].p(d,m),v(f[_],1)):(f[_]=St(d),f[_].c(),v(f[_],1),f[_].m(e,null))}for(W(),_=c.length;_<f.length;_+=1)u(_);X()}},i(p){if(!s){v(r);for(let m=0;m<c.length;m+=1)v(f[m]);s=!0}},o(p){k(r),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)k(f[m]);s=!1},d(p){p&&h(e),r&&r.d(),Ke(a,p),Ke(f,p)}}}function In(n,e,l){let{$$slots:t={},$$scope:i}=e;const s=Yl(t);let{tabs:r=[]}=e,{activeTabValue:o}=e,{clickTab:a}=e;const c=(p,m,_)=>{p.code==="Enter"&&m(_)},f=(p,m)=>a(p.value,p.value),u=(p,m)=>c(m,a,p.value);return n.$$set=p=>{"tabs"in p&&l(0,r=p.tabs),"activeTabValue"in p&&l(1,o=p.activeTabValue),"clickTab"in p&&l(2,a=p.clickTab),"$$scope"in p&&l(5,i=p.$$scope)},[r,o,a,c,s,i,t,f,u]}class Pn extends le{constructor(e){super(),ne(this,e,In,Nn,te,{tabs:0,activeTabValue:1,clickTab:2})}}function Dn(n){let e,l,t,i;const s=n[1].default,r=_e(s,n,n[0],null);return{c(){e=y("h2"),r&&r.c(),l=D(),t=y("hr"),this.h()},l(o){e=M(o,"H2",{class:!0});var a=P(e);r&&r.l(a),a.forEach(h),l=O(o),t=M(o,"HR",{class:!0}),this.h()},h(){b(e,"class","text-center svelte-1j2cwkl"),b(t,"class","svelte-1j2cwkl")},m(o,a){E(o,e,a),r&&r.m(e,null),E(o,l,a),E(o,t,a),i=!0},p(o,[a]){r&&r.p&&(!i||a&1)&&he(r,s,o,o[0],i?ge(s,o[0],a,null):be(o[0]),null)},i(o){i||(v(r,o),i=!0)},o(o){k(r,o),i=!1},d(o){o&&(h(e),h(l),h(t)),r&&r.d(o)}}}function On(n,e,l){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&l(0,i=s.$$scope)},[i,t]}class Sn extends le{constructor(e){super(),ne(this,e,On,Dn,te,{})}}const zn=n=>({}),zt=n=>({}),Ln=n=>({}),Lt=n=>({});function Vn(n){let e,l,t,i,s,r,o,a,c;const f=n[5].submit,u=_e(f,n,n[4],Lt),p=n[5].cancel,m=_e(p,n,n[4],zt);return{c(){e=y("hr"),l=D(),t=y("section"),i=y("button"),u&&u.c(),s=D(),r=y("button"),m&&m.c(),this.h()},l(_){e=M(_,"HR",{class:!0}),l=O(_),t=M(_,"SECTION",{id:!0,class:!0});var d=P(t);i=M(d,"BUTTON",{});var g=P(i);u&&u.l(g),g.forEach(h),s=O(d),r=M(d,"BUTTON",{});var C=P(r);m&&m.l(C),C.forEach(h),d.forEach(h),this.h()},h(){b(e,"class","svelte-7f2jjs"),b(t,"id","btns"),b(t,"class","svelte-7f2jjs")},m(_,d){E(_,e,d),E(_,l,d),E(_,t,d),w(t,i),u&&u.m(i,null),w(t,s),w(t,r),m&&m.m(r,null),o=!0,a||(c=[B(i,"click",n[6]),B(r,"click",function(){xl(n[2])&&n[2].apply(this,arguments)})],a=!0)},p(_,[d]){n=_,u&&u.p&&(!o||d&16)&&he(u,f,n,n[4],o?ge(f,n[4],d,Ln):be(n[4]),Lt),m&&m.p&&(!o||d&16)&&he(m,p,n,n[4],o?ge(p,n[4],d,zn):be(n[4]),zt)},i(_){o||(v(u,_),v(m,_),o=!0)},o(_){k(u,_),k(m,_),o=!1},d(_){_&&(h(e),h(l),h(t)),u&&u.d(_),m&&m.d(_),a=!1,de(c)}}}function qn(n,e,l){let t,i=j,s=()=>(i(),i=Le(a,p=>l(3,t=p)),a);n.$$.on_destroy.push(()=>i());let{$$slots:r={},$$scope:o}=e,{item:a}=e;s();let{handleOnSubmit:c}=e,{handleCloseModal:f}=e;const u=()=>c(t);return n.$$set=p=>{"item"in p&&s(l(0,a=p.item)),"handleOnSubmit"in p&&l(1,c=p.handleOnSubmit),"handleCloseModal"in p&&l(2,f=p.handleCloseModal),"$$scope"in p&&l(4,o=p.$$scope)},[a,c,f,t,o,r,u]}class Hn extends le{constructor(e){super(),ne(this,e,qn,Vn,te,{item:0,handleOnSubmit:1,handleCloseModal:2})}}function Vt(n,e,l){const t=n.slice();return t[3]=e[l],t}function qt(n){let e,l=n[3].name+"",t,i;return{c(){e=y("option"),t=G(l),this.h()},l(s){e=M(s,"OPTION",{});var r=P(e);t=K(r,l),r.forEach(h),this.h()},h(){e.__value=i=n[3],Ce(e,e.__value)},m(s,r){E(s,e,r),w(e,t)},p(s,r){r&2&&l!==(l=s[3].name+"")&&De(t,l),r&2&&i!==(i=s[3])&&(e.__value=i,Ce(e,e.__value))},d(s){s&&h(e)}}}function An(n){let e,l,t="NAME",i,s,r,o,a=`Select Capability from Templates...
      `,c,f,u,p=n[0].name+"",m,_,d,g,C=Te(n[1]),N=[];for(let $=0;$<C.length;$+=1)N[$]=qt(Vt(n,C,$));return{c(){e=y("div"),l=y("label"),l.textContent=t,i=D(),s=y("div"),r=y("select"),o=y("option"),o.textContent=a;for(let $=0;$<N.length;$+=1)N[$].c();c=D(),f=y("p"),u=G("The Template Capability ("),m=G(p),_=G(`) will incorporate all
    child Capabilities and associated Techniques.`),this.h()},l($){e=M($,"DIV",{id:!0,class:!0});var I=P(e);l=M(I,"LABEL",{"aria-label":!0,for:!0,"data-svelte-h":!0}),ye(l)!=="svelte-l4gr53"&&(l.textContent=t),i=O(I),s=M(I,"DIV",{id:!0});var A=P(s);r=M(A,"SELECT",{id:!0,class:!0});var H=P(r);o=M(H,"OPTION",{"data-svelte-h":!0}),ye(o)!=="svelte-1t4hjue"&&(o.textContent=a);for(let ie=0;ie<N.length;ie+=1)N[ie].l(H);H.forEach(h),A.forEach(h),c=O(I),f=M(I,"P",{class:!0});var U=P(f);u=K(U,"The Template Capability ("),m=K(U,p),_=K(U,`) will incorporate all
    child Capabilities and associated Techniques.`),U.forEach(h),I.forEach(h),this.h()},h(){b(l,"aria-label","Capability Name"),b(l,"for","capability-name"),o.selected=!0,o.disabled=!0,o.__value="",Ce(o,o.__value),b(r,"id","capability--select"),r.required=!0,b(r,"class","svelte-3hjn8y"),n[0]===void 0&&Ee(()=>n[2].call(r)),b(s,"id","autocomplete"),b(f,"class","form-info"),x(f,"non--existing",n[0]),b(e,"id","layer-input-form"),b(e,"class","svelte-3hjn8y")},m($,I){E($,e,I),w(e,l),w(e,i),w(e,s),w(s,r),w(r,o);for(let A=0;A<N.length;A+=1)N[A]&&N[A].m(r,null);nt(r,n[0],!0),w(e,c),w(e,f),w(f,u),w(f,m),w(f,_),d||(g=B(r,"change",n[2]),d=!0)},p($,[I]){if(I&2){C=Te($[1]);let A;for(A=0;A<C.length;A+=1){const H=Vt($,C,A);N[A]?N[A].p(H,I):(N[A]=qt(H),N[A].c(),N[A].m(r,null))}for(;A<N.length;A+=1)N[A].d(1);N.length=C.length}I&3&&nt(r,$[0]),I&1&&p!==(p=$[0].name+"")&&De(m,p),I&1&&x(f,"non--existing",$[0])},i:j,o:j,d($){$&&h(e),Ke(N,$),d=!1,g()}}}function Bn(n,e,l){let{selectedCapability:t=null}=e,{capabilities:i}=e;function s(){t=kl(this),l(0,t),l(1,i)}return n.$$set=r=>{"selectedCapability"in r&&l(0,t=r.selectedCapability),"capabilities"in r&&l(1,i=r.capabilities)},[t,i,s]}class Zn extends le{constructor(e){super(),ne(this,e,Bn,An,te,{selectedCapability:0,capabilities:1})}}function Rn(n){let e,l,t,i,s,r,o,a,c,f,u,p,m,_,d;return{c(){e=y("div"),l=y("form"),t=y("label"),i=y("p"),s=G(n[1]),r=D(),o=y("input"),a=D(),c=y("label"),f=y("p"),u=G(n[2]),p=D(),m=y("textarea"),this.h()},l(g){e=M(g,"DIV",{id:!0,class:!0});var C=P(e);l=M(C,"FORM",{class:!0,autocomplete:!0});var N=P(l);t=M(N,"LABEL",{"aria-label":!0,for:!0});var $=P(t);i=M($,"P",{});var I=P(i);s=K(I,n[1]),I.forEach(h),$.forEach(h),r=O(N),o=M(N,"INPUT",{id:!0,type:!0,name:!0,class:!0,"aria-describedby":!0,oninvalid:!0}),a=O(N),c=M(N,"LABEL",{"aria-label":!0,for:!0});var A=P(c);f=M(A,"P",{});var H=P(f);u=K(H,n[2]),H.forEach(h),A.forEach(h),p=O(N),m=M(N,"TEXTAREA",{id:!0,name:!0,class:!0}),P(m).forEach(h),N.forEach(h),C.forEach(h),this.h()},h(){b(t,"aria-label","layer name"),b(t,"for","layer-name"),b(o,"id","layer-name"),b(o,"type","text"),b(o,"name","Layer"),b(o,"class","layer-input svelte-s0zavs"),o.required=!0,b(o,"aria-describedby","layername-error"),b(o,"oninvalid",n[5]("This field is required.")),b(c,"aria-label","layer description"),b(c,"for","layer-description"),b(m,"id","layer-description"),b(m,"name","Description"),b(m,"class","layer-input svelte-s0zavs"),m.required=!0,b(l,"class","layer-input-form svelte-s0zavs"),b(l,"autocomplete","off"),b(e,"id","container-layer-form"),b(e,"class","svelte-s0zavs")},m(g,C){E(g,e,C),w(e,l),w(l,t),w(t,i),w(i,s),w(l,r),w(l,o),Ce(o,n[4].name),w(l,a),w(l,c),w(c,f),w(f,u),w(l,p),w(l,m),Ce(m,n[4].description),n[9](l),_||(d=[B(o,"input",n[7]),B(m,"input",n[8])],_=!0)},p(g,[C]){C&2&&De(s,g[1]),C&16&&o.value!==g[4].name&&Ce(o,g[4].name),C&4&&De(u,g[2]),C&16&&Ce(m,g[4].description)},i:j,o:j,d(g){g&&h(e),n[9](null),_=!1,de(d)}}}function jn(n,e,l){let t,i=j,s=()=>(i(),i=Le(r,d=>l(4,t=d)),r);n.$$.on_destroy.push(()=>i());let{item:r}=e;s();let{textInput:o}=e,{textArea:a}=e,{submit:c}=e,f;wl(()=>{F(r,t.name="",t),F(r,t.description="",t)});const u=d=>d;function p(){t.name=this.value,r.set(t)}function m(){t.description=this.value,r.set(t)}function _(d){we[d?"unshift":"push"](()=>{f=d,l(3,f)})}return n.$$set=d=>{"item"in d&&s(l(0,r=d.item)),"textInput"in d&&l(1,o=d.textInput),"textArea"in d&&l(2,a=d.textArea),"submit"in d&&l(6,c=d.submit)},[r,o,a,f,t,u,c,p,m,_]}class Fn extends le{constructor(e){super(),ne(this,e,jn,Rn,te,{item:0,textInput:1,textArea:2,submit:6})}}const Un=n=>({}),Ht=n=>({M:n[1],item:n[0]});function Gn(n){let e,l;const t=n[3].default,i=_e(t,n,n[2],Ht);return{c(){e=y("section"),i&&i.c(),this.h()},l(s){e=M(s,"SECTION",{id:!0,class:!0});var r=P(e);i&&i.l(r),r.forEach(h),this.h()},h(){b(e,"id","dialog--container"),b(e,"class","svelte-1jrgukv")},m(s,r){E(s,e,r),i&&i.m(e,null),l=!0},p(s,[r]){i&&i.p&&(!l||r&4)&&he(i,t,s,s[2],l?ge(t,s[2],r,Un):be(s[2]),Ht)},i(s){l||(v(i,s),l=!0)},o(s){k(i,s),l=!1},d(s){s&&h(e),i&&i.d(s)}}}function Kn(n,e,l){let{$$slots:t={},$$scope:i}=e;const s=He({}),r={Title:Sn,Buttons:Hn,Select:Zn,Create:Fn};return n.$$set=o=>{"$$scope"in o&&l(2,i=o.$$scope)},[s,r,i,t]}class rt extends le{constructor(e){super(),ne(this,e,Kn,Gn,te,{})}}function At(n,e,l){const t=n.slice();return t[12]=e[l],t}function Bt(n){let e,l=n[12].name+"",t;return{c(){e=y("option"),t=G(l),this.h()},l(i){e=M(i,"OPTION",{});var s=P(e);t=K(s,l),s.forEach(h),this.h()},h(){e.__value=n[12],Ce(e,e.__value)},m(i,s){E(i,e,s),w(e,t)},p:j,d(i){i&&h(e)}}}function Jn(n){let e,l,t,i,s,r,o,a,c,f="NAME",u,p,m,_,d=`Select Capability from Templates...
          `,g,C,N,$=n[0].name+"",I,A,H,U,ie,R,se,Oe="Save",Ne,$e,Ie="Cancel",Se,Re,Ae=Te(n[3]),fe=[];for(let ee=0;ee<Ae.length;ee+=1)fe[ee]=Bt(At(n,Ae,ee));return{c(){e=y("section"),l=y("h2"),t=G(n[1]),i=D(),s=y("hr"),r=D(),o=y("article"),a=y("div"),c=y("label"),c.textContent=f,u=D(),p=y("div"),m=y("select"),_=y("option"),_.textContent=d;for(let ee=0;ee<fe.length;ee+=1)fe[ee].c();g=D(),C=y("p"),N=G("The Template Capability ("),I=G($),A=G(`) will incorporate all
        associated Techniques.`),H=D(),U=y("hr"),ie=D(),R=y("section"),se=y("button"),se.textContent=Oe,Ne=D(),$e=y("button"),$e.textContent=Ie,this.h()},l(ee){e=M(ee,"SECTION",{id:!0,class:!0});var pe=P(e);l=M(pe,"H2",{class:!0});var oe=P(l);t=K(oe,n[1]),oe.forEach(h),i=O(pe),s=M(pe,"HR",{}),r=O(pe),o=M(pe,"ARTICLE",{id:!0});var Pe=P(o);a=M(Pe,"DIV",{id:!0,class:!0});var Be=P(a);c=M(Be,"LABEL",{"aria-label":!0,for:!0,class:!0,"data-svelte-h":!0}),ye(c)!=="svelte-l4gr53"&&(c.textContent=f),u=O(Be),p=M(Be,"DIV",{id:!0,class:!0});var et=P(p);m=M(et,"SELECT",{id:!0,class:!0});var We=P(m);_=M(We,"OPTION",{"data-svelte-h":!0}),ye(_)!=="svelte-1lnlsc6"&&(_.textContent=d);for(let Xe=0;Xe<fe.length;Xe+=1)fe[Xe].l(We);We.forEach(h),et.forEach(h),g=O(Be),C=M(Be,"P",{class:!0});var je=P(C);N=K(je,"The Template Capability ("),I=K(je,$),A=K(je,`) will incorporate all
        associated Techniques.`),je.forEach(h),Be.forEach(h),H=O(Pe),U=M(Pe,"HR",{}),ie=O(Pe),R=M(Pe,"SECTION",{id:!0,class:!0});var Fe=P(R);se=M(Fe,"BUTTON",{"data-svelte-h":!0}),ye(se)!=="svelte-syg9fy"&&(se.textContent=Oe),Ne=O(Fe),$e=M(Fe,"BUTTON",{"data-svelte-h":!0}),ye($e)!=="svelte-1alkrs9"&&($e.textContent=Ie),Fe.forEach(h),Pe.forEach(h),pe.forEach(h),this.h()},h(){b(l,"class","text-center"),b(c,"aria-label","Capability Name"),b(c,"for","capability-name"),b(c,"class","svelte-3ehrko"),_.selected=!0,_.disabled=!0,_.__value="",Ce(_,_.__value),b(m,"id","capability--select"),m.required=!0,b(m,"class","svelte-3ehrko"),n[0]===void 0&&Ee(()=>n[9].call(m)),b(p,"id","autocomplete"),b(p,"class","svelte-3ehrko"),b(C,"class","form-info svelte-3ehrko"),x(C,"non--existing",!n[2].templates[n[0]?.id]),b(a,"id","layer-input-form"),b(a,"class","svelte-3ehrko"),b(R,"id","layer-btns"),b(R,"class","svelte-3ehrko"),b(o,"id","container-capability-form"),b(e,"id","dialog--container"),b(e,"class","svelte-3ehrko")},m(ee,pe){E(ee,e,pe),w(e,l),w(l,t),w(e,i),w(e,s),w(e,r),w(e,o),w(o,a),w(a,c),w(a,u),w(a,p),w(p,m),w(m,_);for(let oe=0;oe<fe.length;oe+=1)fe[oe]&&fe[oe].m(m,null);nt(m,n[0],!0),w(a,g),w(a,C),w(C,N),w(C,I),w(C,A),w(o,H),w(o,U),w(o,ie),w(o,R),w(R,se),w(R,Ne),w(R,$e),Se||(Re=[B(m,"change",n[9]),B(se,"click",n[4]),B($e,"click",n[5])],Se=!0)},p(ee,[pe]){if(pe&2&&De(t,ee[1]),pe&8){Ae=Te(ee[3]);let oe;for(oe=0;oe<Ae.length;oe+=1){const Pe=At(ee,Ae,oe);fe[oe]?fe[oe].p(Pe,pe):(fe[oe]=Bt(Pe),fe[oe].c(),fe[oe].m(m,null))}for(;oe<fe.length;oe+=1)fe[oe].d(1);fe.length=Ae.length}pe&9&&nt(m,ee[0]),pe&1&&$!==($=ee[0].name+"")&&De(I,$),pe&5&&x(C,"non--existing",!ee[2].templates[ee[0]?.id])},i:j,o:j,d(ee){ee&&h(e),Ke(fe,ee),Se=!1,de(Re)}}}function Qn(n,e,l){let t;ue(n,Y,d=>l(2,t=d));let{dialog:i}=e,{title:s}=e,{selectedCapability:r=""}=e,{store:o}=e,{copyHandler:a}=e;const c=El(),f=Object.values(t.rootTemplates.map(d=>t.templates[d])),u=(d,g,C=[])=>{C.push(d);for(const N of d?.children||[])u(g[N],g,C);return C},p=d=>{const g=u(r,o);a(g),c("closeModal",{dialog:i,dialogName:"copy"})},m=d=>{c("closeModal",{dialog:i,dialogName:"copy"})};function _(){r=kl(this),l(0,r),l(3,f)}return n.$$set=d=>{"dialog"in d&&l(6,i=d.dialog),"title"in d&&l(1,s=d.title),"selectedCapability"in d&&l(0,r=d.selectedCapability),"store"in d&&l(7,o=d.store),"copyHandler"in d&&l(8,a=d.copyHandler)},[r,s,t,f,p,m,i,o,a,_]}class Wn extends le{constructor(e){super(),ne(this,e,Qn,Jn,te,{dialog:6,title:1,selectedCapability:0,store:7,copyHandler:8})}}function Zt(n){let e,l,t,i,s,r,o;return{c(){e=y("button"),l=G("Save Techniques"),t=D(),i=y("button"),s=G("Remove"),this.h()},l(a){e=M(a,"BUTTON",{class:!0,title:!0});var c=P(e);l=K(c,"Save Techniques"),c.forEach(h),t=O(a),i=M(a,"BUTTON",{class:!0,title:!0});var f=P(i);s=K(f,"Remove"),f.forEach(h),this.h()},h(){b(e,"class","control-btn svelte-1sz3pl3"),e.disabled=n[1],b(e,"title","Save Techniques to currently highlighted Capabilities"),b(i,"class","control-btn svelte-1sz3pl3"),i.disabled=n[1],b(i,"title","Remove Techniques from currently highlighted Capabilities")},m(a,c){E(a,e,c),w(e,l),E(a,t,c),E(a,i,c),w(i,s),r||(o=[B(e,"click",n[7]),B(i,"click",n[8])],r=!0)},p(a,c){c&2&&(e.disabled=a[1]),c&2&&(i.disabled=a[1])},d(a){a&&(h(e),h(t),h(i)),r=!1,de(o)}}}function Xn(n){let e,l=!n[2].isReadonly&&Zt(n);return{c(){e=y("div"),l&&l.c(),this.h()},l(t){e=M(t,"DIV",{id:!0,class:!0});var i=P(e);l&&l.l(i),i.forEach(h),this.h()},h(){b(e,"id","row-persist-btns"),b(e,"class","svelte-1sz3pl3")},m(t,i){E(t,e,i),l&&l.m(e,null)},p(t,[i]){t[2].isReadonly?l&&(l.d(1),l=null):l?l.p(t,i):(l=Zt(t),l.c(),l.m(e,null))},i:j,o:j,d(t){t&&h(e),l&&l.d()}}}function Yn(n,e,l){let t,i,s,r;ue(n,ve,p=>l(0,i=p)),ue(n,Y,p=>l(2,s=p)),ue(n,Ge,p=>l(3,r=p));let{selectedStore:o}=e;const a=(p,m)=>{Y.saveTechniques(p,m,o),Ge.reset()},c=(p,m)=>{Y.removeTechniques(p,m,o),Ge.reset()},f=()=>a(r.treeMap,i),u=()=>c(r.treeMap,i);return n.$$set=p=>{"selectedStore"in p&&l(6,o=p.selectedStore)},n.$$.update=()=>{n.$$.dirty&1&&l(1,t=!Object.values(i).some(p=>p===Q.selected))},[i,t,s,r,a,c,o,f,u]}class Tl extends le{constructor(e){super(),ne(this,e,Yn,Xn,te,{selectedStore:6})}}const Rt={setting:"M19.5 12c0 .34-.03.66-.07.98l2.11 1.65c.19.15.24.42.12.64l-2 3.46c-.12.22-.38.31-.61.22l-2.49-1c-.52.39-1.08.73-1.69.98l-.38 2.65c-.03.24-.24.42-.49.42h-4c-.25 0-.46-.18-.49-.42l-.38-2.65c-.61-.25-1.17-.58-1.69-.98l-2.49 1c-.22.08-.49 0-.61-.22l-2-3.46a.505.505 0 0 1 .12-.64l2.11-1.65A7.93 7.93 0 0 1 4.5 12c0-.33.03-.66.07-.98L2.46 9.37a.493.493 0 0 1-.12-.64l2-3.46c.12-.22.38-.31.61-.22l2.49 1c.52-.39 1.08-.73 1.69-.98l.38-2.65c.03-.24.24-.42.49-.42h4c.25 0 .46.18.49.42l.38 2.65c.61.25 1.17.58 1.69.98l2.49-1c.22-.08.49 0 .61.22l2 3.46c.12.22.07.49-.12.64l-2.11 1.65c.04.32.07.64.07.98Zm-11 0c0 1.93 1.57 3.5 3.5 3.5s3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5-3.5 1.57-3.5 3.5Z","color picker":"M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8Zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12ZM8 6.5C8 7.33 8.67 8 9.5 8S11 7.33 11 6.5 10.33 5 9.5 5 8 5.67 8 6.5ZM14.5 8c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8Zm1.5 2.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5S18.33 9 17.5 9s-1.5.67-1.5 1.5Z",create:"M20.71 5.63c.39.39.39 1.02 0 1.41l-1.83 1.83-3.75-3.75 1.83-1.83a.996.996 0 0 1 1.41 0l2.34 2.34ZM3 20.5v-3.04c0-.14.05-.26.15-.36L14.06 6.19l3.75 3.75L6.89 20.85a.47.47 0 0 1-.35.15H3.5c-.28 0-.5-.22-.5-.5Z",delete:"M16 2v4h6v2h-2v14H4V8H2V6h6V2zm-2 2h-4v2h4zm0 4H6v12h12V8zm-5 2h2v8H9zm6 0h-2v8h2z","create profile":"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v1c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-1h5c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2Zm0 13c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h16c.55 0 1 .45 1 1v10Zm-6-4c.55 0 1-.45 1-1s-.45-1-1-1h-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H9c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2Z",heatMap:"M10.5 2A3.5 3.5 0 0 1 14 5.5v6.758a5.5 5.5 0 1 1-7 0V5.499A3.5 3.5 0 0 1 10.5 2Zm0 2a1.5 1.5 0 0 0-1.493 1.355L9 5.5v7.699l-.726.6a3.5 3.5 0 1 0 4.609.137l-.156-.136-.726-.6L12 5.5a1.5 1.5 0 0 0-1.355-1.493L10.5 4Zm.5 1.5a.5.5 0 0 0-1 0v8.55a2.5 2.5 0 1 0 1 0V5.5Zm9 5.5a1 1 0 1 1 0 2h-3a1 1 0 1 1 0-2h3Zm-1-2a1 1 0 0 0-1-1h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 1-1Zm1-4a1 1 0 1 1 0 2h-3a1 1 0 1 1 0-2h3Zm-1-2a1 1 0 0 0-1-1h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 1-1Z",multiColor:"M6.34 19.24c-3.12-3.12-3.12-8.19 0-11.31l4.96-4.95a.996.996 0 0 1 1.41 0l4.95 4.95c3.12 3.12 3.12 8.19 0 11.31A7.98 7.98 0 0 1 12 21.58c-2.05 0-4.1-.78-5.66-2.34Zm1.42-1.41A5.928 5.928 0 0 0 12 19.59V5.1L7.76 9.35A5.928 5.928 0 0 0 6 13.59c0 1.6.62 3.1 1.76 4.24Z",info:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1Zm-1-8h2V7h-2v2Z",plus:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1Z",arrowLeft:"M14.71 6.71a.996.996 0 0 0-1.41 0L8.71 11.3a.996.996 0 0 0 0 1.41l4.59 4.59a.996.996 0 1 0 1.41-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41Z",arrowRight:"M9.29 6.71a.996.996 0 0 0 0 1.41L13.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01Z",chart:"M5 3h14c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2Zm1 16c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1H6Zm6-2c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8c0 .55-.45 1-1 1Zm-4 0c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v5c0 .55-.45 1-1 1Zm7-1c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v2Z",plus_circle:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2m0 18a8 8 0 1 1 8-8a8 8 0 0 1-8 8m4-9h-3V8a1 1 0 0 0-2 0v3H8a1 1 0 0 0 0 2h3v3a1 1 0 0 0 2 0v-3h3a1 1 0 0 0 0-2",export:"M11.78 7.159a.75.75 0 0 0-1.06 0l-1.97 1.97V1.75a.75.75 0 0 0-1.5 0v7.379l-1.97-1.97a.75.75 0 0 0-1.06 1.06l3.25 3.25L8 12l.53-.53l3.25-3.25a.75.75 0 0 0 0-1.061ZM2.5 9.75a.75.75 0 1 0-1.5 0V13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9.75a.75.75 0 0 0-1.5 0V13a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V9.75Z",import:"M11.78 5.841a.75.75 0 0 1-1.06 0l-1.97-1.97v7.379a.75.75 0 0 1-1.5 0V3.871l-1.97 1.97a.75.75 0 0 1-1.06-1.06l3.25-3.25L8 1l.53.53l3.25 3.25a.75.75 0 0 1 0 1.061ZM2.5 9.75a.75.75 0 0 0-1.5 0V13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9.75a.75.75 0 0 0-1.5 0V13a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V9.75Z",edit:"m19.71 8.04l-2.34 2.33l-3.75-3.75l2.34-2.33c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25L13.06 7.18l3.75 3.75L6.75 21H3zM16.62 5.04l-1.54 1.54l2.34 2.34l1.54-1.54zM15.36 11L13 8.64l-9 9.02V20h2.34z",check:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z",close:"M6.793 6.793a1 1 0 0 1 1.414 0L12 10.586l3.793-3.793a1 1 0 1 1 1.414 1.414L13.414 12l3.793 3.793a1 1 0 0 1-1.414 1.414L12 13.414l-3.793 3.793a1 1 0 0 1-1.414-1.414L10.586 12L6.793 8.207a1 1 0 0 1 0-1.414Z",copy:"M21 8.94a1.31 1.31 0 0 0-.06-.27v-.09a1.07 1.07 0 0 0-.19-.28l-6-6a1.07 1.07 0 0 0-.28-.19a.32.32 0 0 0-.09 0a.88.88 0 0 0-.33-.11H10a3 3 0 0 0-3 3v1H6a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-1h1a3 3 0 0 0 3-3V8.94Zm-6-3.53L17.59 8H16a1 1 0 0 1-1-1ZM15 19a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h1v7a3 3 0 0 0 3 3h5Zm4-4a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3v3a3 3 0 0 0 3 3h3Z",childrenMultiColor:"M8 30H2v-6h6zm-4-2h2v-2H4zm15 2h-6v-6h6zm-4-2h2v-2h-2zm15 2h-6v-6h6zm-4-2h2v-2h-2zM16 10a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4m0-6a2 2 0 1 0 2 2a2.002 2.002 0 0 0-2-2m10 12h-5a4.005 4.005 0 0 1-4-4h-2a4.005 4.005 0 0 1-4 4H6a2.002 2.002 0 0 0-2 2v4h2v-4h5a5.97 5.97 0 0 0 4-1.54V22h2v-5.54A5.97 5.97 0 0 0 21 18h5v4h2v-4a2.002 2.002 0 0 0-2-2",infoOutline:"M13 9h-2V7h2zm0 8h-2v-6h2zM5 3h14a2 2 0 0 1 2 2v14c0 .53-.21 1.04-.59 1.41c-.37.38-.88.59-1.41.59H5c-.53 0-1.04-.21-1.41-.59C3.21 20.04 3 19.53 3 19V5c0-1.11.89-2 2-2m14 16V5H5v14z"};function xn(n){let e,l,t,i,s,r,o,a,c,f;const u=n[9].default,p=_e(u,n,n[8],null);let m=[{style:o="--size:"+n[0]},{"data-icon":n[2]},{class:"fab"},{"aria-label":n[3]},{disabled:n[4]},n[7]],_={};for(let d=0;d<m.length;d+=1)_=ut(_,m[d]);return{c(){e=y("button"),l=ht("svg"),t=ht("path"),r=D(),p&&p.c(),this.h()},l(d){e=M(d,"BUTTON",{style:!0,"data-icon":!0,class:!0,"aria-label":!0});var g=P(e);l=bt(g,"svg",{xmlns:!0,viewBox:!0,class:!0});var C=P(l);t=bt(C,"path",{"fill-rule":!0,d:!0,fill:!0}),P(t).forEach(h),C.forEach(h),r=O(g),p&&p.l(g),g.forEach(h),this.h()},h(){b(t,"fill-rule","evenodd"),b(t,"d",i=Rt[n[2]]),b(t,"fill",n[5]),b(l,"xmlns","http://www.w3.org/2000/svg"),b(l,"viewBox",s="0 0 "+n[1]+" "+n[1]),b(l,"class","svelte-fbph36"),x(l,"icon-disabled",n[4]),gt(e,_),x(e,"svelte-fbph36",!0)},m(d,g){E(d,e,g),w(e,l),w(l,t),w(e,r),p&&p.m(e,null),e.autofocus&&e.focus(),a=!0,c||(f=B(e,"click",n[6],!0),c=!0)},p(d,[g]){(!a||g&4&&i!==(i=Rt[d[2]]))&&b(t,"d",i),(!a||g&32)&&b(t,"fill",d[5]),(!a||g&2&&s!==(s="0 0 "+d[1]+" "+d[1]))&&b(l,"viewBox",s),(!a||g&16)&&x(l,"icon-disabled",d[4]),p&&p.p&&(!a||g&256)&&he(p,u,d,d[8],a?ge(u,d[8],g,null):be(d[8]),null),gt(e,_=_n(m,[(!a||g&1&&o!==(o="--size:"+d[0]))&&{style:o},(!a||g&4)&&{"data-icon":d[2]},{class:"fab"},(!a||g&8)&&{"aria-label":d[3]},(!a||g&16)&&{disabled:d[4]},g&128&&d[7]])),x(e,"svelte-fbph36",!0)},i(d){a||(v(p,d),a=!0)},o(d){k(p,d),a=!1},d(d){d&&h(e),p&&p.d(d),c=!1,f()}}}function ei(n,e,l){const t=["size","viewBox","iconName","description","disabled","pathColor"];let i=$t(e,t),{$$slots:s={},$$scope:r}=e,{size:o}=e,{viewBox:a=24}=e,{iconName:c}=e,{description:f}=e,{disabled:u=!1}=e,{pathColor:p="black"}=e;const m=new El,_=d=>{m("iconClick",{event:d})};return n.$$set=d=>{e=ut(ut({},e),en(d)),l(7,i=$t(e,t)),"size"in d&&l(0,o=d.size),"viewBox"in d&&l(1,a=d.viewBox),"iconName"in d&&l(2,c=d.iconName),"description"in d&&l(3,f=d.description),"disabled"in d&&l(4,u=d.disabled),"pathColor"in d&&l(5,p=d.pathColor),"$$scope"in d&&l(8,r=d.$$scope)},[o,a,c,f,u,p,_,i,r,s]}class J extends le{constructor(e){super(),ne(this,e,ei,xn,te,{size:0,viewBox:1,iconName:2,description:3,disabled:4,pathColor:5})}}function jt(n,e,l){const t=n.slice();t[10]=e[l],t[13]=l;const i=t[4]===0?t[10]:t[3];return t[11]=i,t}const ti=n=>({capability:n&1024,parent:n&32,level:n&16,idx:n&8192,root:n&93}),Ft=n=>({capability:n[10],parent:n[5],level:n[4],idx:n[13],root:n[11]}),li=n=>({parent:n&32,capability:n&69,level:n&16,root:n&93}),Ut=n=>({parent:n[5],capability:n[10],level:n[4],idx:n[13],root:n[11]});function ni(n){let e;return{c(){e=G("No slot")},l(l){e=K(l,"No slot")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Gt(n){let e,l;return e=new Nl({props:{capabilities:n[10]?.children,parent:n[10],level:n[4]+1,root:n[11],store:n[1],storeProp:n[2],$$slots:{default:[si,({capability:t,level:i,idx:s,parent:r})=>({10:t,4:i,13:s,5:r}),({capability:t,level:i,idx:s,parent:r})=>(t?1024:0)|(i?16:0)|(s?8192:0)|(r?32:0)]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i&69&&(s.capabilities=t[10]?.children),i&69&&(s.parent=t[10]),i&16&&(s.level=t[4]+1),i&93&&(s.root=t[11]),i&2&&(s.store=t[1]),i&4&&(s.storeProp=t[2]),i&9853&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ii(n){let e;return{c(){e=G("No slot")},l(l){e=K(l,"No slot")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Kt(n){let e;const l=n[7].default,t=_e(l,n,n[9],Ft),i=t||ii();return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,r){i&&i.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||r&9853)&&he(t,l,s,s[9],e?ge(l,s[9],r,ti):be(s[9]),Ft)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function si(n){let e=n[5],l,t,i=Kt(n);return{c(){i.c(),l=D()},l(s){i.l(s),l=O(s)},m(s,r){i.m(s,r),E(s,l,r),t=!0},p(s,r){r&32&&te(e,e=s[5])?(W(),k(i,1,1,j),X(),i=Kt(s),i.c(),v(i,1),i.m(l.parentNode,l)):i.p(s,r)},i(s){t||(v(i),t=!0)},o(s){k(i),t=!1},d(s){s&&h(l),i.d(s)}}}function Jt(n){let e,l,t;const i=n[7].default,s=_e(i,n,n[9],Ut),r=s||ni();let o=n[10]?.children?.length>0&&Gt(n);return{c(){r&&r.c(),e=D(),o&&o.c(),l=ce()},l(a){r&&r.l(a),e=O(a),o&&o.l(a),l=ce()},m(a,c){r&&r.m(a,c),E(a,e,c),o&&o.m(a,c),E(a,l,c),t=!0},p(a,c){s&&s.p&&(!t||c&637)&&he(s,i,a,a[9],t?ge(i,a[9],c,li):be(a[9]),Ut),a[10]?.children?.length>0?o?(o.p(a,c),c&69&&v(o,1)):(o=Gt(a),o.c(),v(o,1),o.m(l.parentNode,l)):o&&(W(),k(o,1,1,()=>{o=null}),X())},i(a){t||(v(r,a),v(o),t=!0)},o(a){k(r,a),k(o),t=!1},d(a){a&&(h(e),h(l)),r&&r.d(a),o&&o.d(a)}}}function ri(n){let e,l,t=Te(n[0].map(n[8])),i=[];for(let r=0;r<t.length;r+=1)i[r]=Jt(jt(n,t,r));const s=r=>k(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=ce()},l(r){for(let o=0;o<i.length;o+=1)i[o].l(r);e=ce()},m(r,o){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,o);E(r,e,o),l=!0},p(r,[o]){if(o&9855){t=Te(r[0].map(r[8]));let a;for(a=0;a<t.length;a+=1){const c=jt(r,t,a);i[a]?(i[a].p(c,o),v(i[a],1)):(i[a]=Jt(c),i[a].c(),v(i[a],1),i[a].m(e.parentNode,e))}for(W(),a=t.length;a<i.length;a+=1)s(a);X()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)v(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)k(i[o]);l=!1},d(r){r&&h(e),Ke(i,r)}}}function oi(n,e,l){let t,i=j,s=()=>(i(),i=Le(c,d=>l(6,t=d)),c);n.$$.on_destroy.push(()=>i());let{$$slots:r={},$$scope:o}=e,{capabilities:a=[]}=e,{store:c}=e;s();let{storeProp:f}=e,{level:u=0}=e,{parent:p=null}=e,{root:m=null}=e;const _=d=>t[f][d];return n.$$set=d=>{"capabilities"in d&&l(0,a=d.capabilities),"store"in d&&s(l(1,c=d.store)),"storeProp"in d&&l(2,f=d.storeProp),"level"in d&&l(4,u=d.level),"parent"in d&&l(5,p=d.parent),"root"in d&&l(3,m=d.root),"$$scope"in d&&l(9,o=d.$$scope)},[a,c,f,m,u,p,t,r,_,o]}class Nl extends le{constructor(e){super(),ne(this,e,oi,ri,te,{capabilities:0,store:1,storeProp:2,level:4,parent:5,root:3})}}const ai=n=>({}),Qt=n=>({});function Wt(n){let e,l,t,i,s,r,o,a,c,f,u;const p=[fi,ci],m=[];function _(d,g){return d[2]?0:1}return r=_(n),o=m[r]=p[r](n),{c(){e=y("div"),l=y("div"),i=D(),s=y("div"),o.c(),this.h()},l(d){e=M(d,"DIV",{class:!0,role:!0,tabindex:!0,"aria-labelledby":!0,"aria-describedby":!0,style:!0});var g=P(e);l=M(g,"DIV",{class:!0,tabindex:!0,role:!0}),P(l).forEach(h),i=O(g),s=M(g,"DIV",{class:!0,role:!0,tabindex:!0});var C=P(s);o.l(C),C.forEach(h),g.forEach(h),this.h()},h(){b(l,"class","backdrop svelte-1valdbt"),b(l,"tabindex","0"),b(l,"role","button"),b(s,"class","wrapper svelte-1valdbt"),b(s,"role","button"),b(s,"tabindex","0"),b(e,"class","popover svelte-1valdbt"),b(e,"role","button"),b(e,"tabindex","0"),b(e,"aria-labelledby","Chart"),b(e,"aria-describedby","Description"),ae(e,"--popover-y",n[5].top+"px"),ae(e,"--popover-right",n[5].right+10+"px"),ae(e,"--color-icon",n[1])},m(d,g){E(d,e,g),w(e,l),w(e,i),w(e,s),m[r].m(s,null),c=!0,f||(u=[B(l,"click",pt(n[8])),B(s,"mouseleave",n[7])],f=!0)},p(d,g){let C=r;r=_(d),r===C?m[r].p(d,g):(W(),k(m[C],1,1,()=>{m[C]=null}),X(),o=m[r],o?o.p(d,g):(o=m[r]=p[r](d),o.c()),v(o,1),o.m(s,null)),(!c||g&32)&&ae(e,"--popover-y",d[5].top+"px"),(!c||g&32)&&ae(e,"--popover-right",d[5].right+10+"px"),(!c||g&2)&&ae(e,"--color-icon",d[1])},i(d){c||(d&&Ee(()=>{c&&(t||(t=ke(l,Me,{delay:25,duration:150},!0)),t.run(1))}),v(o),d&&Ee(()=>{c&&(a||(a=ke(e,Me,{duration:150},!0)),a.run(1))}),c=!0)},o(d){d&&(t||(t=ke(l,Me,{delay:25,duration:150},!1)),t.run(0)),k(o),d&&(a||(a=ke(e,Me,{duration:150},!1)),a.run(0)),c=!1},d(d){d&&h(e),d&&t&&t.end(),m[r].d(),d&&a&&a.end(),f=!1,de(u)}}}function ci(n){let e,l,t,i,s,r,o,a,c,f,u;return a=new J({props:{size:33,iconName:"edit",description:"Edit Description",title:"Edit Description",pathColor:"black"}}),{c(){e=y("div"),l=y("pre"),t=G(n[3]),s=D(),r=y("div"),o=y("span"),S(a.$$.fragment),this.h()},l(p){e=M(p,"DIV",{class:!0,id:!0});var m=P(e);l=M(m,"PRE",{class:!0});var _=P(l);t=K(_,n[3]),_.forEach(h),m.forEach(h),s=O(p),r=M(p,"DIV",{class:!0,role:!0,tabindex:!0});var d=P(r);o=M(d,"SPAN",{});var g=P(o);V(a.$$.fragment,g),g.forEach(h),d.forEach(h),this.h()},h(){b(l,"class","popover-text svelte-1valdbt"),b(e,"class","popover-description svelte-1valdbt"),b(e,"id",i=n[0].id),b(r,"class","edit-btn svelte-1valdbt"),b(r,"role","button"),b(r,"tabindex","0")},m(p,m){E(p,e,m),w(e,l),w(l,t),E(p,s,m),E(p,r,m),w(r,o),z(a,o,null),c=!0,f||(u=[B(r,"click",n[9]),B(r,"keyup",null)],f=!0)},p(p,m){(!c||m&8)&&De(t,p[3]),(!c||m&1&&i!==(i=p[0].id))&&b(e,"id",i)},i(p){c||(v(a.$$.fragment,p),c=!0)},o(p){k(a.$$.fragment,p),c=!1},d(p){p&&(h(e),h(s),h(r)),L(a),f=!1,de(u)}}}function fi(n){let e,l,t,i,s,r,o,a,c,f,u;return r=new J({props:{size:33,iconName:"check",description:"Save Description",title:"Save Description"}}),r.$on("iconClick",n[10]),a=new J({props:{size:33,iconName:"close",description:"close",title:"close"}}),a.$on("iconClick",n[11]),{c(){e=y("div"),l=y("textarea"),i=D(),s=y("div"),S(r.$$.fragment),o=D(),S(a.$$.fragment),this.h()},l(p){e=M(p,"DIV",{class:!0,id:!0});var m=P(e);l=M(m,"TEXTAREA",{id:!0,name:!0,class:!0}),P(l).forEach(h),m.forEach(h),i=O(p),s=M(p,"DIV",{class:!0});var _=P(s);V(r.$$.fragment,_),o=O(_),V(a.$$.fragment,_),_.forEach(h),this.h()},h(){b(l,"id","layer-description"),b(l,"name","Description"),b(l,"class","layer-description svelte-1valdbt"),l.required=!0,b(e,"class","popover-description svelte-1valdbt"),b(e,"id",t=n[0].id),b(s,"class","popover-btns svelte-1valdbt")},m(p,m){E(p,e,m),w(e,l),Ce(l,n[3]),E(p,i,m),E(p,s,m),z(r,s,null),w(s,o),z(a,s,null),c=!0,f||(u=B(l,"input",n[14]),f=!0)},p(p,m){m&8&&Ce(l,p[3]),(!c||m&1&&t!==(t=p[0].id))&&b(e,"id",t)},i(p){c||(v(r.$$.fragment,p),v(a.$$.fragment,p),c=!0)},o(p){k(r.$$.fragment,p),k(a.$$.fragment,p),c=!1},d(p){p&&(h(e),h(i),h(s)),L(r),L(a),f=!1,u()}}}function ui(n){let e,l,t,i,s,r;const o=n[13].popoverHover,a=_e(o,n,n[12],Qt);let c=(n[4]||n[2])&&Wt(n);return{c(){e=y("div"),a&&a.c(),l=D(),c&&c.c(),t=ce(),this.h()},l(f){e=M(f,"DIV",{role:!0,tabindex:!0});var u=P(e);a&&a.l(u),u.forEach(h),l=O(f),c&&c.l(f),t=ce(),this.h()},h(){b(e,"role","button"),b(e,"tabindex","0")},m(f,u){E(f,e,u),a&&a.m(e,null),E(f,l,u),c&&c.m(f,u),E(f,t,u),i=!0,s||(r=B(e,"click",n[6]),s=!0)},p(f,[u]){a&&a.p&&(!i||u&4096)&&he(a,o,f,f[12],i?ge(o,f[12],u,ai):be(f[12]),Qt),f[4]||f[2]?c?(c.p(f,u),u&20&&v(c,1)):(c=Wt(f),c.c(),v(c,1),c.m(t.parentNode,t)):c&&(W(),k(c,1,1,()=>{c=null}),X())},i(f){i||(v(a,f),v(c),i=!0)},o(f){k(a,f),k(c),i=!1},d(f){f&&(h(e),h(l),h(t)),a&&a.d(f),c&&c.d(f),s=!1,r()}}}const at=He(null),ct=He(!1),Ye=He(!1),Xt=He({}),ft=He({});let lt;const di=n=>n?.getBoundingClientRect()??{bottom:0,left:0};function pi(n,e,l){let t,i,s,r,o;ue(n,Ye,$=>l(2,t=$)),ue(n,ft,$=>l(3,i=$)),ue(n,ct,$=>l(4,s=$)),ue(n,at,$=>l(15,r=$)),ue(n,Xt,$=>l(5,o=$));let{$$slots:a={},$$scope:c}=e,{item:f}=e,{color:u}=e;const p=$=>{clearTimeout(lt),lt=setTimeout(()=>{F(at,r=f.id,r),F(Xt,o=di($.target),o),F(ct,s=!0,s),F(ft,i=f.description,i)},500)},m=$=>{clearTimeout(lt),lt=setTimeout(()=>{_()},1e3)},_=()=>{F(at,r=null,r),F(ct,s=!1,s),F(Ye,t=!1,t)},d=()=>{F(Ye,t=!0,t)},g=$=>{Y.editDescription(f.id,i),F(Ye,t=!1,t)},C=()=>{F(Ye,t=!1,t),_()};function N(){i=this.value,ft.set(i)}return n.$$set=$=>{"item"in $&&l(0,f=$.item),"color"in $&&l(1,u=$.color),"$$scope"in $&&l(12,c=$.$$scope)},[f,u,t,i,s,o,p,m,_,d,g,C,c,a,N]}class Il extends le{constructor(e){super(),ne(this,e,pi,ui,te,{item:0,color:1})}}const mi=n=>({}),Yt=n=>({});function xt(n){const e=n[8][n[61]?.id];n[64]=e}function _i(n){let e,l,t,i,s,r,o,a,c,f;function u(...N){return n[42](n[61],...N)}function p(N,$){return N[64]===Q.editing?gi:bi}let m=p(n),_=m(n);const d=[vi,$i],g=[];function C(N,$){return N[64]===Q.selected?0:N[64]===Q.editing?1:-1}return~(r=C(n))&&(o=g[r]=d[r](n)),{c(){e=y("div"),l=y("input"),i=D(),_.c(),s=D(),o&&o.c(),this.h()},l(N){e=M(N,"DIV",{class:!0,style:!0});var $=P(e);l=M($,"INPUT",{class:!0,type:!0,name:!0,style:!0}),i=O($),_.l($),s=O($),o&&o.l($),$.forEach(h),this.h()},h(){b(l,"class","check-box svelte-sdt035"),b(l,"type","checkbox"),b(l,"name","include"),l.checked=t=n[61]?.checked,ae(l,"accent-color",n[12][n[9].techniqueMappingMode]({root:n[63],capability:n[61]})),b(e,"class","layer-child layer-hover svelte-sdt035"),ae(e,"--level",n[11]),x(e,"selected-layer",n[64]===Q.selected)},m(N,$){E(N,e,$),w(e,l),w(e,i),_.m(e,null),w(e,s),~r&&g[r].m(e,null),a=!0,c||(f=B(l,"click",Je(u)),c=!0)},p(N,$){n=N,(!a||$[1]&1073741824&&t!==(t=n[61]?.checked))&&(l.checked=t),(!a||$[0]&512|$[1]&1073741824|$[2]&2)&&ae(l,"accent-color",n[12][n[9].techniqueMappingMode]({root:n[63],capability:n[61]})),m===(m=p(n))&&_?_.p(n,$):(_.d(1),_=m(n),_&&(_.c(),_.m(e,s)));let I=r;r=C(n),r===I?~r&&g[r].p(n,$):(o&&(W(),k(g[I],1,1,()=>{g[I]=null}),X()),~r?(o=g[r],o?o.p(n,$):(o=g[r]=d[r](n),o.c()),v(o,1),o.m(e,null)):o=null),(!a||$[0]&2048)&&ae(e,"--level",n[11]),(!a||$[0]&256|$[1]&1073741824)&&x(e,"selected-layer",n[64]===Q.selected)},i(N){a||(v(o),a=!0)},o(N){k(o),a=!1},d(N){N&&h(e),_.d(),~r&&g[r].d(),c=!1,f()}}}function hi(n){let e,l,t,i,s,r,o,a,c,f,u;function p(...$){return n[29](n[61],...$)}function m($,I){return $[64]===Q.editing?wi:ki}let _=m(n),d=_(n);const g=[yi,Ei],C=[];function N($,I){return $[64]===Q.selected||$[64]===Q.parent?0:$[64]===Q.editing?1:-1}return~(o=N(n))&&(a=C[o]=g[o](n)),{c(){e=y("div"),l=y("form"),t=y("input"),s=D(),d.c(),r=D(),a&&a.c(),this.h()},l($){e=M($,"DIV",{class:!0});var I=P(e);l=M(I,"FORM",{});var A=P(l);t=M(A,"INPUT",{class:!0,type:!0,name:!0,tabindex:!0,style:!0}),A.forEach(h),s=O(I),d.l(I),r=O(I),a&&a.l(I),I.forEach(h),this.h()},h(){b(t,"class","check-box svelte-sdt035"),b(t,"type","checkbox"),b(t,"name","include"),t.checked=i=n[61]?.checked,b(t,"tabindex","0"),ae(t,"accent-color",n[12][n[9].techniqueMappingMode]({root:n[63],capability:n[61]})),b(e,"class","layer-parent svelte-sdt035"),x(e,"selected-layer",n[64]===Q.selected),x(e,"layer-hover",!n[61]?.children?.length)},m($,I){E($,e,I),w(e,l),w(l,t),w(e,s),d.m(e,null),w(e,r),~o&&C[o].m(e,null),c=!0,f||(u=B(t,"click",Je(p)),f=!0)},p($,I){n=$,(!c||I[1]&1073741824&&i!==(i=n[61]?.checked))&&(t.checked=i),(!c||I[0]&512|I[1]&1073741824|I[2]&2)&&ae(t,"accent-color",n[12][n[9].techniqueMappingMode]({root:n[63],capability:n[61]})),_===(_=m(n))&&d?d.p(n,I):(d.d(1),d=_(n),d&&(d.c(),d.m(e,r)));let A=o;o=N(n),o===A?~o&&C[o].p(n,I):(a&&(W(),k(C[A],1,1,()=>{C[A]=null}),X()),~o?(a=C[o],a?a.p(n,I):(a=C[o]=g[o](n),a.c()),v(a,1),a.m(e,null)):a=null),(!c||I[0]&256|I[1]&1073741824)&&x(e,"selected-layer",n[64]===Q.selected),(!c||I[1]&1073741824)&&x(e,"layer-hover",!n[61]?.children?.length)},i($){c||(v(a),c=!0)},o($){k(a),c=!1},d($){$&&h(e),d.d(),~o&&C[o].d(),f=!1,u()}}}function bi(n){let e,l=n[61].name+"",t,i,s;function r(...a){return n[45](n[61],n[63],...a)}function o(...a){return n[46](n[61],n[63],...a)}return{c(){e=y("span"),t=G(l),this.h()},l(a){e=M(a,"SPAN",{class:!0,tabindex:!0,role:!0});var c=P(e);t=K(c,l),c.forEach(h),this.h()},h(){b(e,"class","layer-text svelte-sdt035"),b(e,"tabindex","0"),b(e,"role","button")},m(a,c){E(a,e,c),w(e,t),i||(s=[B(e,"click",r),B(e,"keydown",o)],i=!0)},p(a,c){n=a,c[1]&1073741824&&l!==(l=n[61].name+"")&&De(t,l)},d(a){a&&h(e),i=!1,de(s)}}}function gi(n){let e,l,t;function i(...s){return n[44](n[61],n[63],...s)}return{c(){e=y("input"),this.h()},l(s){e=M(s,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){b(e,"type","text"),b(e,"name","capabilityName"),b(e,"class","layer-text text-cursor svelte-sdt035")},m(s,r){E(s,e,r),Ce(e,n[7]),l||(t=[yl(n[26].call(null,e)),B(e,"input",n[43]),B(e,"keydown",Je(i))],l=!0)},p(s,r){n=s,r[0]&128&&e.value!==n[7]&&Ce(e,n[7])},d(s){s&&h(e),l=!1,de(t)}}}function $i(n){let e,l,t,i,s,r;function o(...c){return n[53](n[61],n[63],...c)}l=new J({props:{size:it,iconName:"check",description:"Save Capability",title:"Save Capability"}}),l.$on("iconClick",o);function a(...c){return n[54](n[61],...c)}return i=new J({props:{size:it,iconName:"close",description:"close",title:"close"}}),i.$on("iconClick",a),{c(){e=y("div"),S(l.$$.fragment),t=D(),S(i.$$.fragment),this.h()},l(c){e=M(c,"DIV",{class:!0});var f=P(e);V(l.$$.fragment,f),t=O(f),V(i.$$.fragment,f),f.forEach(h),this.h()},h(){b(e,"class","capability-form-btns svelte-sdt035")},m(c,f){E(c,e,f),z(l,e,null),w(e,t),z(i,e,null),r=!0},p(c,f){n=c},i(c){r||(v(l.$$.fragment,c),v(i.$$.fragment,c),c&&(s||Ee(()=>{s=st(e,Qe,{duration:700,delay:100,axis:"x",x:10}),s.start()})),r=!0)},o(c){k(l.$$.fragment,c),k(i.$$.fragment,c),r=!1},d(c){c&&h(e),L(l),L(i)}}}function vi(n){let e,l,t,i,s,r,o,a,c,f,u;function p(...g){return n[47](n[61],n[11],...g)}l=new J({props:{size:qe,iconName:"plus",description:"Create Capability Child",title:"Create Capability Child"}}),l.$on("iconClick",p);function m(...g){return n[48](n[61],n[10],...g)}i=new J({props:{size:qe,iconName:"edit",description:"Edit Capability",title:"Edit Capability"}}),i.$on("iconClick",m);function _(...g){return n[49](n[61],n[10],...g)}r=new J({props:{size:28,iconName:"delete",description:"Delete Capability",title:"Delete Capability"}}),r.$on("iconClick",_),a=new Il({props:{item:n[61],color:n[61].color,$$slots:{popoverHover:[Ci]},$$scope:{ctx:n}}});let d=n[9].techniqueMappingMode!==re.heatMap&&el(n);return{c(){e=y("div"),S(l.$$.fragment),t=D(),S(i.$$.fragment),s=D(),S(r.$$.fragment),o=D(),S(a.$$.fragment),c=D(),d&&d.c(),this.h()},l(g){e=M(g,"DIV",{class:!0});var C=P(e);V(l.$$.fragment,C),t=O(C),V(i.$$.fragment,C),s=O(C),V(r.$$.fragment,C),o=O(C),V(a.$$.fragment,C),c=O(C),d&&d.l(C),C.forEach(h),this.h()},h(){b(e,"class","capability-btns svelte-sdt035")},m(g,C){E(g,e,C),z(l,e,null),w(e,t),z(i,e,null),w(e,s),z(r,e,null),w(e,o),z(a,e,null),w(e,c),d&&d.m(e,null),u=!0},p(g,C){n=g;const N={};C[1]&1073741824&&(N.item=n[61]),C[1]&1073741824&&(N.color=n[61].color),C[1]&134217728&&(N.$$scope={dirty:C,ctx:n}),a.$set(N),n[9].techniqueMappingMode!==re.heatMap?d?(d.p(n,C),C[0]&512&&v(d,1)):(d=el(n),d.c(),v(d,1),d.m(e,null)):d&&(W(),k(d,1,1,()=>{d=null}),X())},i(g){u||(v(l.$$.fragment,g),v(i.$$.fragment,g),v(r.$$.fragment,g),v(a.$$.fragment,g),v(d),g&&Ee(()=>{u&&(f||(f=ke(e,Qe,{axis:"x",duration:200,x:-5},!0)),f.run(1))}),u=!0)},o(g){k(l.$$.fragment,g),k(i.$$.fragment,g),k(r.$$.fragment,g),k(a.$$.fragment,g),k(d),g&&(f||(f=ke(e,Qe,{axis:"x",duration:200,x:-5},!1)),f.run(0)),u=!1},d(g){g&&h(e),L(l),L(i),L(r),L(a),d&&d.d(),g&&f&&f.end()}}}function Ci(n){let e,l;return e=new J({props:{size:qe,iconName:"infoOutline",slot:"popoverHover"}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function el(n){let e,l,t,i,s=n[61],r,o,a;function c(...m){return n[50](n[61],n[10],n[62],...m)}e=new J({props:{size:qe,iconName:"color picker",description:"Pick Capability Color",title:"Pick Capability Color"}}),e.$on("iconClick",c);const f=()=>n[51](t,s),u=()=>n[51](null,s);function p(...m){return n[52](n[61],...m)}return{c(){S(e.$$.fragment),l=D(),t=y("input"),this.h()},l(m){V(e.$$.fragment,m),l=O(m),t=M(m,"INPUT",{type:!0,id:!0,name:!0,style:!0}),this.h()},h(){b(t,"type","color"),b(t,"id","head"),b(t,"name","head"),t.value=i=n[61].color,ae(t,"display","none")},m(m,_){z(e,m,_),E(m,l,_),E(m,t,_),f(),r=!0,o||(a=B(t,"change",p),o=!0)},p(m,_){n=m,(!r||_[1]&1073741824&&i!==(i=n[61].color))&&(t.value=i),s!==n[61]&&(u(),s=n[61],f())},i(m){r||(v(e.$$.fragment,m),r=!0)},o(m){k(e.$$.fragment,m),r=!1},d(m){m&&(h(l),h(t)),L(e,m),u(),o=!1,a()}}}function ki(n){let e,l=n[61].name+"",t,i,s;function r(...a){return n[32](n[61],...a)}function o(...a){return n[33](n[61],...a)}return{c(){e=y("span"),t=G(l),this.h()},l(a){e=M(a,"SPAN",{class:!0,tabindex:!0,role:!0});var c=P(e);t=K(c,l),c.forEach(h),this.h()},h(){b(e,"class","layer-text svelte-sdt035"),b(e,"tabindex","0"),b(e,"role","button"),x(e,"parent-layer",n[61].children?.length>0)},m(a,c){E(a,e,c),w(e,t),i||(s=[B(e,"click",r),B(e,"keydown",o)],i=!0)},p(a,c){n=a,c[1]&1073741824&&l!==(l=n[61].name+"")&&De(t,l),c[1]&1073741824&&x(e,"parent-layer",n[61].children?.length>0)},d(a){a&&h(e),i=!1,de(s)}}}function wi(n){let e,l,t;function i(...s){return n[31](n[61],n[63],...s)}return{c(){e=y("input"),this.h()},l(s){e=M(s,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){b(e,"type","text"),b(e,"name","capabilityName"),b(e,"class","layer-text text-cursor svelte-sdt035")},m(s,r){E(s,e,r),Ce(e,n[7]),l||(t=[yl(n[26].call(null,e)),B(e,"input",n[30]),B(e,"keydown",Je(i))],l=!0)},p(s,r){n=s,r[0]&128&&e.value!==n[7]&&Ce(e,n[7])},d(s){s&&h(e),l=!1,de(t)}}}function Ei(n){let e,l,t,i,s,r;function o(){return n[40](n[61],n[63])}l=new J({props:{size:it,iconName:"check",description:"Edit Capability",title:"Edit Capability"}}),l.$on("iconClick",o);function a(...c){return n[41](n[61],...c)}return i=new J({props:{size:it,iconName:"close",description:"close",title:"close"}}),i.$on("iconClick",a),{c(){e=y("div"),S(l.$$.fragment),t=D(),S(i.$$.fragment),this.h()},l(c){e=M(c,"DIV",{class:!0});var f=P(e);V(l.$$.fragment,f),t=O(f),V(i.$$.fragment,f),f.forEach(h),this.h()},h(){b(e,"class","capability-form-btns svelte-sdt035")},m(c,f){E(c,e,f),z(l,e,null),w(e,t),z(i,e,null),r=!0},p(c,f){n=c},i(c){r||(v(l.$$.fragment,c),v(i.$$.fragment,c),c&&(s||Ee(()=>{s=st(e,Qe,{duration:700,delay:100,axis:"x",x:10}),s.start()})),r=!0)},o(c){k(l.$$.fragment,c),k(i.$$.fragment,c),r=!1},d(c){c&&h(e),L(l),L(i)}}}function yi(n){let e,l,t,i,s,r,o,a,c,f,u;function p(...g){return n[34](n[61],n[11],...g)}l=new J({props:{size:qe,iconName:"plus",description:"Create Capability Child",title:"Create Capability Child"}}),l.$on("iconClick",p);function m(...g){return n[35](n[61],n[10],...g)}i=new J({props:{size:qe,iconName:"edit",description:"Edit Capability",title:"Edit Capability"}}),i.$on("iconClick",m);function _(...g){return n[36](n[61],...g)}r=new J({props:{size:qe,iconName:"delete",description:"Delete Capability and Children",title:"Delete Capability and Children"}}),r.$on("iconClick",_),a=new Il({props:{item:n[61],color:n[61].color,$$slots:{popoverHover:[Mi]},$$scope:{ctx:n}}});let d=n[9].techniqueMappingMode!==re.heatMap&&tl(n);return{c(){e=y("div"),S(l.$$.fragment),t=D(),S(i.$$.fragment),s=D(),S(r.$$.fragment),o=D(),S(a.$$.fragment),c=D(),d&&d.c(),this.h()},l(g){e=M(g,"DIV",{class:!0});var C=P(e);V(l.$$.fragment,C),t=O(C),V(i.$$.fragment,C),s=O(C),V(r.$$.fragment,C),o=O(C),V(a.$$.fragment,C),c=O(C),d&&d.l(C),C.forEach(h),this.h()},h(){b(e,"class","capability-btns svelte-sdt035")},m(g,C){E(g,e,C),z(l,e,null),w(e,t),z(i,e,null),w(e,s),z(r,e,null),w(e,o),z(a,e,null),w(e,c),d&&d.m(e,null),u=!0},p(g,C){n=g;const N={};C[1]&1073741824&&(N.item=n[61]),C[1]&1073741824&&(N.color=n[61].color),C[1]&134217728&&(N.$$scope={dirty:C,ctx:n}),a.$set(N),n[9].techniqueMappingMode!==re.heatMap?d?(d.p(n,C),C[0]&512&&v(d,1)):(d=tl(n),d.c(),v(d,1),d.m(e,null)):d&&(W(),k(d,1,1,()=>{d=null}),X())},i(g){u||(v(l.$$.fragment,g),v(i.$$.fragment,g),v(r.$$.fragment,g),v(a.$$.fragment,g),v(d),g&&Ee(()=>{u&&(f||(f=ke(e,Qe,{axis:"x",duration:100,x:-10},!0)),f.run(1))}),u=!0)},o(g){k(l.$$.fragment,g),k(i.$$.fragment,g),k(r.$$.fragment,g),k(a.$$.fragment,g),k(d),g&&(f||(f=ke(e,Qe,{axis:"x",duration:100,x:-10},!1)),f.run(0)),u=!1},d(g){g&&h(e),L(l),L(i),L(r),L(a),d&&d.d(),g&&f&&f.end()}}}function Mi(n){let e,l;return e=new J({props:{size:qe,iconName:"infoOutline",slot:"popoverHover"}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function tl(n){let e,l,t,i,s=n[61],r,o,a;function c(...m){return n[37](n[61],n[10],n[62],...m)}e=new J({props:{size:qe,iconName:"color picker",description:"Pick Capability Family Color",title:"Pick Capability Family Color"}}),e.$on("iconClick",c);const f=()=>n[38](t,s),u=()=>n[38](null,s);function p(...m){return n[39](n[61],...m)}return{c(){S(e.$$.fragment),l=D(),t=y("input"),this.h()},l(m){V(e.$$.fragment,m),l=O(m),t=M(m,"INPUT",{type:!0,id:!0,name:!0,style:!0}),this.h()},h(){b(t,"type","color"),b(t,"id","head"),b(t,"name","head"),t.value=i=n[61].color,ae(t,"display","none")},m(m,_){z(e,m,_),E(m,l,_),E(m,t,_),f(),r=!0,o||(a=B(t,"input",tn(pt(p))),o=!0)},p(m,_){n=m,(!r||_[1]&1073741824&&i!==(i=n[61].color))&&(t.value=i),s!==n[61]&&(u(),s=n[61],f())},i(m){r||(v(e.$$.fragment,m),r=!0)},o(m){k(e.$$.fragment,m),r=!1},d(m){m&&(h(l),h(t)),L(e,m),u(),o=!1,a()}}}function Ti(n){xt(n);let e,l,t,i;const s=[hi,_i],r=[];function o(a,c){return a[11]===0?0:a[11]!==0?1:-1}return~(e=o(n))&&(l=r[e]=s[e](n)),{c(){l&&l.c(),t=ce()},l(a){l&&l.l(a),t=ce()},m(a,c){~e&&r[e].m(a,c),E(a,t,c),i=!0},p(a,c){xt(a);let f=e;e=o(a),e===f?~e&&r[e].p(a,c):(l&&(W(),k(r[f],1,1,()=>{r[f]=null}),X()),~e?(l=r[e],l?l.p(a,c):(l=r[e]=s[e](a),l.c()),v(l,1),l.m(t.parentNode,t)):l=null)},i(a){i||(v(l),i=!0)},o(a){k(l),i=!1},d(a){a&&h(t),~e&&r[e].d(a)}}}function ll(n){let e,l;return e=new rt({props:{$$slots:{default:[Di,({M:t,item:i})=>({59:t,60:i}),({M:t,item:i})=>[0,(t?268435456:0)|(i?536870912:0)]]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i[0]&3092|i[1]&671088640&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ni(n){let e;return{c(){e=G("Create Child Capability")},l(l){e=K(l,"Create Child Capability")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Ii(n){let e;return{c(){e=G("Create")},l(l){e=K(l,"Create")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Pi(n){let e;return{c(){e=G("Cancel")},l(l){e=K(l,"Cancel")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Di(n){let e,l,t,i,s,r;return e=new n[59].Title({props:{$$slots:{default:[Ni]},$$scope:{ctx:n}}}),t=new n[59].Create({props:{item:n[60],textInput:"Name",textArea:"Description"}}),s=new n[59].Buttons({props:{item:n[60],handleCloseModal:n[18],handleOnSubmit:n[55],$$slots:{cancel:[Pi],submit:[Ii]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),S(s.$$.fragment)},l(o){V(e.$$.fragment,o),l=O(o),V(t.$$.fragment,o),i=O(o),V(s.$$.fragment,o)},m(o,a){z(e,o,a),E(o,l,a),z(t,o,a),E(o,i,a),z(s,o,a),r=!0},p(o,a){const c={};a[1]&134217728&&(c.$$scope={dirty:a,ctx:o}),e.$set(c);const f={};a[1]&536870912&&(f.item=o[60]),t.$set(f);const u={};a[1]&536870912&&(u.item=o[60]),a[0]&3092&&(u.handleOnSubmit=o[55]),a[1]&134217728&&(u.$$scope={dirty:a,ctx:o}),s.$set(u)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),v(s.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),k(t.$$.fragment,o),k(s.$$.fragment,o),r=!1},d(o){o&&(h(l),h(i)),L(e,o),L(t,o),L(s,o)}}}function Oi(n){let e,l,t,i,s,r,o;e=new Nl({props:{capabilities:n[0]||[],store:n[1],storeProp:n[2],$$slots:{default:[Ti,({capability:u,idx:p,level:m,parent:_,root:d})=>({61:u,62:p,11:m,10:_,63:d}),({capability:u,idx:p,level:m,parent:_,root:d})=>[(m?2048:0)|(_?1024:0),u?1073741824:0,(p?1:0)|(d?2:0)]]},$$scope:{ctx:n}}});const a=n[28].buttons,c=_e(a,n,n[58],Yt);let f=n[6]&&ll(n);return{c(){S(e.$$.fragment),l=D(),c&&c.c(),t=D(),i=y("dialog"),f&&f.c(),this.h()},l(u){V(e.$$.fragment,u),l=O(u),c&&c.l(u),t=O(u),i=M(u,"DIALOG",{id:!0});var p=P(i);f&&f.l(p),p.forEach(h),this.h()},h(){i.open=n[6],b(i,"id","create--capability--dialog")},m(u,p){z(e,u,p),E(u,l,p),c&&c.m(u,p),E(u,t,p),E(u,i,p),f&&f.m(i,null),n[56](i),s=!0,r||(o=B(i,"close",n[57]),r=!0)},p(u,p){const m={};p[0]&1&&(m.capabilities=u[0]||[]),p[0]&2&&(m.store=u[1]),p[0]&4&&(m.storeProp=u[2]),p[0]&4012|p[1]&1207959552|p[2]&3&&(m.$$scope={dirty:p,ctx:u}),e.$set(m),c&&c.p&&(!s||p[1]&134217728)&&he(c,a,u,u[58],s?ge(a,u[58],p,mi):be(u[58]),Yt),u[6]?f?(f.p(u,p),p[0]&64&&v(f,1)):(f=ll(u),f.c(),v(f,1),f.m(i,null)):f&&(W(),k(f,1,1,()=>{f=null}),X()),(!s||p[0]&64)&&(i.open=u[6])},i(u){s||(v(e.$$.fragment,u),v(c,u),v(f),s=!0)},o(u){k(e.$$.fragment,u),k(c,u),k(f),s=!1},d(u){u&&(h(l),h(t),h(i)),L(e,u),c&&c.d(u),f&&f.d(),n[56](null),r=!1,o()}}}const qe=28,it=33;function Si(n,e,l){let t,i,s=j,r=()=>(s(),s=Le(f,T=>l(9,i=T)),f);ue(n,ve,T=>l(8,t=T)),n.$$.on_destroy.push(()=>s());let{$$slots:o={},$$scope:a}=e,{capabilities:c}=e,{store:f}=e;r();let{storeProp:u}=e,{handlers:p}=e;const m={[re.multiColor]:({root:T})=>T.color,[re.childrenMultiColor]:({capability:T})=>T.color,[re.heatMap]:({root:T})=>T.color};let _,d={},g,C,N=!1,$=null;const I=(T,q,Z,me)=>{if(i.isReadonly||!me)return;const Ve=q.id;t[Ve]||F(ve,t[Ve]=Q.noop,t),T.shiftKey?t[Ve]===Q.noop?F(ve,t[Ve]=Q.selected,t):F(ve,t[Ve]=Q.noop,t):Object.entries(t).forEach(([Ze,Ue])=>{Ze===Ve?((!Ue||Ue===Q.noop)&&F(ve,t[Ze]=Q.selected,t),Ue===Q.selected&&F(ve,t[Ze]=Q.noop,t)):F(ve,t[Ze]=Q.noop,t)}),Z&&F(ve,t[Z.id]=Q.parent,t)},A=T=>{const q=i[u][T.id].checked;F(f,i[u][T.id].checked=!q,i)},H=(T,q,Z,me)=>{T.code==="Enter"&&q(T,Z,me)},U=(T,q)=>{const Z=q===void 0?i[u][T.id].checked:q;if(F(f,i[u][T.id].checked=!Z,i),!!T?.children?.length)for(const me of T.children)U(i[u][me],Z)},ie=(T,q,Z)=>{T.detail.event.stopPropagation(),l(10,g=q),l(11,C=Z),l(6,N=!0),_.showModal()},R=()=>{l(6,N=!1),_.close()},se=({name:T,description:q},Z,me,Ve,Ze)=>{const Ue={id:null,name:T,description:q,techniques:[],children:[],checked:!1,color:"#0075FF"};Ve===0?f.addChild(me,Ue,Ve,Ze):f.addNonRootChild(me,Ue,Ze),Z.close()},Oe=(T,q,Z)=>{T.detail.event.stopPropagation(),F(ve,t[q.id]=Q.editing,t),F(ve,t[Z?.id]=Q.noop,t),l(7,$=q.name)},Ne=(T,q,Z)=>{confirm("Deleting Capability with remove all subcapabilities and associated Techniques.")&&f.deleteSublayer(T,q,Z)},$e=(T,q,Z)=>{T.detail.event.stopPropagation(),F(ve,t[q.id]=Q.selected,t),Z&&F(ve,t[Z.id]=Q.parent,t),l(7,$="")},Ie=(T,q,Z,me)=>{f.editName(T.id,Z,me),F(ve,t[T.id]=Q.selected,t),q&&F(ve,t[q?.id]=Q.parent,t)},Se=(T,q,Z)=>{f.saveLayerColor(q,T.srcElement.value,Z)},Re=(T,q,Z,me)=>{d[q.id].click()},Ae=T=>{T.focus()},fe=(T,q,Z)=>{T.stopPropagation(),T.code==="Enter"&&Ie(q,Z,$,u)},ee=(T,q)=>U(T);function pe(){$=this.value,l(7,$)}const oe=(T,q,Z)=>fe(Z,T,q),Pe=(T,q)=>I(q,T,null,T.children.length===0),Be=(T,q)=>H(q,I,T,null,T.children.length===0),et=(T,q,Z)=>ie(Z,T,q),We=(T,q,Z)=>Oe(Z,T,q),je=(T,q)=>p.deleteCapability(T),Fe=(T,q,Z,me)=>Re(me,T);function Xe(T,q){we[T?"unshift":"push"](()=>{d[q.id]=T,l(5,d)})}const Sl=(T,q)=>Se(q,T,u),zl=(T,q)=>Ie(T,q,$,u),Ll=(T,q)=>$e(q,T),Vl=(T,q)=>A(T);function ql(){$=this.value,l(7,$)}const Hl=(T,q,Z)=>fe(Z,T,q),Al=(T,q,Z)=>I(Z,T,q,!0),Bl=(T,q,Z)=>H(Z,I,T,q),Zl=(T,q,Z)=>ie(Z,T,q),Rl=(T,q,Z)=>Oe(Z,T,q),jl=(T,q,Z)=>Ne(T,q,u),Fl=(T,q,Z,me)=>Re(me,T);function Ul(T,q){we[T?"unshift":"push"](()=>{d[q.id]=T,l(5,d)})}const Gl=(T,q)=>Se(q,T,u),Kl=(T,q,Z)=>Ie(T,q,$,u),Jl=(T,q)=>$e(q,T),Ql=T=>se(T,_,g,C,u);function Wl(T){we[T?"unshift":"push"](()=>{_=T,l(4,_)})}const Xl=()=>l(6,N=!1);return n.$$set=T=>{"capabilities"in T&&l(0,c=T.capabilities),"store"in T&&r(l(1,f=T.store)),"storeProp"in T&&l(2,u=T.storeProp),"handlers"in T&&l(3,p=T.handlers),"$$scope"in T&&l(58,a=T.$$scope)},[c,f,u,p,_,d,N,$,t,i,g,C,m,I,A,H,U,ie,R,se,Oe,Ne,$e,Ie,Se,Re,Ae,fe,o,ee,pe,oe,Pe,Be,et,We,je,Fe,Xe,Sl,zl,Ll,Vl,ql,Hl,Al,Bl,Zl,Rl,jl,Fl,Ul,Gl,Kl,Jl,Ql,Wl,Xl,a]}class Pl extends le{constructor(e){super(),ne(this,e,Si,Oi,te,{capabilities:0,store:1,storeProp:2,handlers:3},null,[-1,-1,-1])}}function nl(n){let e,l,t,i,s,r,o,a;e=new J({props:{size:33,iconName:"create profile",description:"Create Profile",title:"Create Profile"}}),e.$on("iconClick",n[9]),t=new J({props:{size:33,iconName:"delete",description:"Delete Profile",title:"Delete Profile"}}),t.$on("iconClick",n[10]);let c=n[3]&&il(n);return{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),s=y("dialog"),c&&c.c(),this.h()},l(f){V(e.$$.fragment,f),l=O(f),V(t.$$.fragment,f),i=O(f),s=M(f,"DIALOG",{});var u=P(s);c&&c.l(u),u.forEach(h),this.h()},h(){s.open=n[3]},m(f,u){z(e,f,u),E(f,l,u),z(t,f,u),E(f,i,u),E(f,s,u),c&&c.m(s,null),n[12](s),r=!0,o||(a=B(s,"close",n[13]),o=!0)},p(f,u){f[3]?c?(c.p(f,u),u&8&&v(c,1)):(c=il(f),c.c(),v(c,1),c.m(s,null)):c&&(W(),k(c,1,1,()=>{c=null}),X()),(!r||u&8)&&(s.open=f[3])},i(f){r||(v(e.$$.fragment,f),v(t.$$.fragment,f),v(c),r=!0)},o(f){k(e.$$.fragment,f),k(t.$$.fragment,f),k(c),r=!1},d(f){f&&(h(l),h(i),h(s)),L(e,f),L(t,f),c&&c.d(),n[12](null),o=!1,a()}}}function il(n){let e,l;return e=new rt({props:{$$slots:{default:[qi,({M:t,item:i})=>({15:t,16:i}),({M:t,item:i})=>(t?32768:0)|(i?65536:0)]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i&196612&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function zi(n){let e;return{c(){e=G("Create New Profile")},l(l){e=K(l,"Create New Profile")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Li(n){let e;return{c(){e=G("Create")},l(l){e=K(l,"Create")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Vi(n){let e;return{c(){e=G("Cancel")},l(l){e=K(l,"Cancel")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function qi(n){let e,l,t,i,s,r;return e=new n[15].Title({props:{$$slots:{default:[zi]},$$scope:{ctx:n}}}),t=new n[15].Create({props:{item:n[16],textInput:"Name",textArea:"Description"}}),s=new n[15].Buttons({props:{item:n[16],handleCloseModal:n[8],handleOnSubmit:n[11],$$slots:{cancel:[Vi],submit:[Li]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),S(s.$$.fragment)},l(o){V(e.$$.fragment,o),l=O(o),V(t.$$.fragment,o),i=O(o),V(s.$$.fragment,o)},m(o,a){z(e,o,a),E(o,l,a),z(t,o,a),E(o,i,a),z(s,o,a),r=!0},p(o,a){const c={};a&131072&&(c.$$scope={dirty:a,ctx:o}),e.$set(c);const f={};a&65536&&(f.item=o[16]),t.$set(f);const u={};a&65536&&(u.item=o[16]),a&4&&(u.handleOnSubmit=o[11]),a&131072&&(u.$$scope={dirty:a,ctx:o}),s.$set(u)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),v(s.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),k(t.$$.fragment,o),k(s.$$.fragment,o),r=!1},d(o){o&&(h(l),h(i)),L(e,o),L(t,o),L(s,o)}}}function Hi(n){let e,l,t=!n[4].isReadonly&&nl(n);return{c(){t&&t.c(),e=ce()},l(i){t&&t.l(i),e=ce()},m(i,s){t&&t.m(i,s),E(i,e,s),l=!0},p(i,[s]){i[4].isReadonly?t&&(W(),k(t,1,1,()=>{t=null}),X()):t?(t.p(i,s),s&16&&v(t,1)):(t=nl(i),t.c(),v(t,1),t.m(e.parentNode,e))},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d(i)}}}function Ai(n,e,l){let t,i=j,s=()=>(i(),i=Le(c,H=>l(4,t=H)),c),r,o=j,a=()=>(o(),o=Le(f,H=>l(14,r=H)),f);n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>o());let{store:c}=e;s();let{selectedProfile:f}=e;a();let u,p=!1;const m=()=>{l(3,p=!0),u.showModal()},_=H=>{confirm("Deleting Profile will delete all associated Capabilities.")&&(c.deleteProfile(),F(f,r=t.profiles[t.selectedProfile]||{name:""},r))},d=({name:H,description:U},ie)=>{c.createProfile({name:H,description:U}),F(f,r=t.profiles[t.selectedProfile]||null,r),ie.close()},g=()=>{l(3,p=!1),u.close()},C=H=>m(),N=H=>_(),$=H=>d(H,u);function I(H){we[H?"unshift":"push"](()=>{u=H,l(2,u)})}const A=()=>l(3,p=!1);return n.$$set=H=>{"store"in H&&s(l(0,c=H.store)),"selectedProfile"in H&&a(l(1,f=H.selectedProfile))},[c,f,u,p,t,m,_,d,g,C,N,$,I,A]}class Bi extends le{constructor(e){super(),ne(this,e,Ai,Hi,te,{store:0,selectedProfile:1})}}function Zi(n){let e,l,t;function i(r){n[6](r)}let s={inputClassName:"autocomplete-cursor-select",items:n[2]?.profiles,readonly:!1,labelFieldName:"name",onChange:n[5]};return n[3]!==void 0&&(s.selectedItem=n[3]),e=new hn({props:s}),we.push(()=>rn(e,"selectedItem",i)),{c(){S(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,o){z(e,r,o),t=!0},p(r,[o]){const a={};o&4&&(a.items=r[2]?.profiles),!l&&o&8&&(l=!0,a.selectedItem=r[3],ln(()=>l=!1)),e.$set(a)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}function Ri(n,e,l){let t,i=j,s=()=>(i(),i=Le(c,_=>l(2,t=_)),c),r,o=j,a=()=>(o(),o=Le(f,_=>l(3,r=_)),f);n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>o());let{store:c}=e;s();let{selectedProfile:f}=e;a();const u=_=>{if(_){const d=t?.profiles.findIndex(({id:g})=>g===_.id);F(c,t.selectedProfile=d,t),F(f,r=t?.profiles?.[d]||null,r),Ge.reset()}else F(c,t.selectedProfile=null,t)},p=_=>u(_);function m(_){r=_,f.set(r)}return n.$$set=_=>{"store"in _&&s(l(0,c=_.store)),"selectedProfile"in _&&a(l(1,f=_.selectedProfile))},[c,f,t,r,u,p,m]}class ji extends le{constructor(e){super(),ne(this,e,Ri,Zi,te,{store:0,selectedProfile:1})}}const Fi=n=>({}),sl=n=>({}),Ui=n=>({}),rl=n=>({});function ol(n){let e,l,t,i,s,r,o,a,c;const f=n[6].popover,u=_e(f,n,n[5],sl);return{c(){e=y("div"),l=y("div"),i=D(),s=y("div"),u&&u.c(),this.h()},l(p){e=M(p,"DIV",{class:!0,role:!0,tabindex:!0,"aria-labelledby":!0,"aria-describedby":!0,style:!0});var m=P(e);l=M(m,"DIV",{class:!0,tabindex:!0,role:!0}),P(l).forEach(h),i=O(m),s=M(m,"DIV",{class:!0});var _=P(s);u&&u.l(_),_.forEach(h),m.forEach(h),this.h()},h(){b(l,"class","backdrop svelte-zv51ll"),b(l,"tabindex","0"),b(l,"role","button"),b(s,"class","wrapper svelte-zv51ll"),b(e,"class","popover svelte-zv51ll"),b(e,"role","button"),b(e,"tabindex","0"),b(e,"aria-labelledby","Chart"),b(e,"aria-describedby","Description"),ae(e,"--popover-top",`${n[2]}px`),ae(e,"--popover-left",`${n[3]}px`)},m(p,m){E(p,e,m),w(e,l),w(e,i),w(e,s),u&&u.m(s,null),o=!0,a||(c=[B(l,"click",Je(n[11])),B(e,"click",Je(n[7]))],a=!0)},p(p,m){u&&u.p&&(!o||m&32)&&he(u,f,p,p[5],o?ge(f,p[5],m,Fi):be(p[5]),sl),(!o||m&4)&&ae(e,"--popover-top",`${p[2]}px`),(!o||m&8)&&ae(e,"--popover-left",`${p[3]}px`)},i(p){o||(p&&Ee(()=>{o&&(t||(t=ke(l,Me,{delay:25,duration:150},!0)),t.run(1))}),v(u,p),p&&Ee(()=>{o&&(r||(r=ke(e,Me,{},!0)),r.run(1))}),o=!0)},o(p){p&&(t||(t=ke(l,Me,{delay:25,duration:150},!1)),t.run(0)),k(u,p),p&&(r||(r=ke(e,Me,{},!1)),r.run(0)),o=!1},d(p){p&&h(e),p&&t&&t.end(),u&&u.d(p),p&&r&&r.end(),a=!1,de(c)}}}function Gi(n){let e,l,t,i,s,r;const o=n[6].popoverClick,a=_e(o,n,n[5],rl);let c=n[1]&&ol(n);return{c(){e=y("div"),a&&a.c(),l=D(),c&&c.c(),t=ce(),this.h()},l(f){e=M(f,"DIV",{role:!0,tabindex:!0});var u=P(e);a&&a.l(u),u.forEach(h),l=O(f),c&&c.l(f),t=ce(),this.h()},h(){b(e,"role","button"),b(e,"tabindex","0")},m(f,u){E(f,e,u),a&&a.m(e,null),n[10](e),E(f,l,u),c&&c.m(f,u),E(f,t,u),i=!0,s||(r=[B(window,"resize",n[8]),B(e,"click",n[9])],s=!0)},p(f,[u]){a&&a.p&&(!i||u&32)&&he(a,o,f,f[5],i?ge(o,f[5],u,Ui):be(f[5]),rl),f[1]?c?(c.p(f,u),u&2&&v(c,1)):(c=ol(f),c.c(),v(c,1),c.m(t.parentNode,t)):c&&(W(),k(c,1,1,()=>{c=null}),X())},i(f){i||(v(a,f),v(c),i=!0)},o(f){k(a,f),k(c),i=!1},d(f){f&&(h(e),h(l),h(t)),a&&a.d(f),n[10](null),c&&c.d(f),s=!1,de(r)}}}function Ki(n,e,l){let{$$slots:t={},$$scope:i}=e,s=!1,r,o,a;const c=d=>setTimeout(()=>{l(2,{bottom:o,left:a}=d?.getBoundingClientRect()??{bottom:0,left:0},o,l(3,a))},1e3);function f(d){nn.call(this,n,d)}const u=d=>c(r),p=()=>l(1,s=!0);function m(d){we[d?"unshift":"push"](()=>{r=d,l(0,r)})}const _=()=>l(1,s=!1);return n.$$set=d=>{"$$scope"in d&&l(5,i=d.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&c(r)},[r,s,o,a,c,i,t,f,u,p,m,_]}class Ji extends le{constructor(e){super(),ne(this,e,Ki,Gi,te,{})}}function Qi(n){let e,l;return e=new J({props:{size:30,iconName:"chart",description:"Change Layout",title:"Change Layout",slot:"popoverClick"}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wi(n){let e,l,t,i,s,r="Root Colored",o,a,c,f,u,p="Multi-Colored",m,_,d,g,C,N="Heatmap",$,I,A;return t=new J({props:{size:30,iconName:re.multiColor,description:"Root Colored",title:"Root Colored"}}),c=new J({props:{size:30,viewBox:32,iconName:re.childrenMultiColor,description:"Children Multi-Color",title:"Children Multi-Color"}}),d=new J({props:{size:30,iconName:re.heatMap,description:"Heatmap",title:"Heatmap"}}),{c(){e=y("div"),l=y("button"),S(t.$$.fragment),i=D(),s=y("span"),s.textContent=r,o=D(),a=y("button"),S(c.$$.fragment),f=D(),u=y("span"),u.textContent=p,m=D(),_=y("button"),S(d.$$.fragment),g=D(),C=y("span"),C.textContent=N,this.h()},l(H){e=M(H,"DIV",{id:!0,slot:!0,class:!0});var U=P(e);l=M(U,"BUTTON",{class:!0});var ie=P(l);V(t.$$.fragment,ie),i=O(ie),s=M(ie,"SPAN",{class:!0,"data-svelte-h":!0}),ye(s)!=="svelte-1mm9720"&&(s.textContent=r),ie.forEach(h),o=O(U),a=M(U,"BUTTON",{class:!0});var R=P(a);V(c.$$.fragment,R),f=O(R),u=M(R,"SPAN",{class:!0,"data-svelte-h":!0}),ye(u)!=="svelte-17kog5w"&&(u.textContent=p),R.forEach(h),m=O(U),_=M(U,"BUTTON",{class:!0});var se=P(_);V(d.$$.fragment,se),g=O(se),C=M(se,"SPAN",{class:!0,"data-svelte-h":!0}),ye(C)!=="svelte-1cpq3q6"&&(C.textContent=N),se.forEach(h),U.forEach(h),this.h()},h(){b(s,"class","pop-text"),b(l,"class","btn svelte-1jv35sd"),x(l,"selected-mode",n[1].techniqueMappingMode===re.multiColor),b(u,"class","pop-text"),b(a,"class","btn svelte-1jv35sd"),x(a,"selected-mode",n[1].techniqueMappingMode===re.childrenMultiColor),b(C,"class","pop-text"),b(_,"class","btn svelte-1jv35sd"),x(_,"selected-mode",n[1].techniqueMappingMode===re.heatMap),b(e,"id","btn-group"),b(e,"slot","popover"),b(e,"class","svelte-1jv35sd")},m(H,U){E(H,e,U),w(e,l),z(t,l,null),w(l,i),w(l,s),w(e,o),w(e,a),z(c,a,null),w(a,f),w(a,u),w(e,m),w(e,_),z(d,_,null),w(_,g),w(_,C),$=!0,I||(A=[B(l,"click",n[3]),B(a,"click",n[4]),B(_,"click",n[5])],I=!0)},p(H,U){(!$||U&2)&&x(l,"selected-mode",H[1].techniqueMappingMode===re.multiColor),(!$||U&2)&&x(a,"selected-mode",H[1].techniqueMappingMode===re.childrenMultiColor),(!$||U&2)&&x(_,"selected-mode",H[1].techniqueMappingMode===re.heatMap)},i(H){$||(v(t.$$.fragment,H),v(c.$$.fragment,H),v(d.$$.fragment,H),$=!0)},o(H){k(t.$$.fragment,H),k(c.$$.fragment,H),k(d.$$.fragment,H),$=!1},d(H){H&&h(e),L(t),L(c),L(d),I=!1,de(A)}}}function Xi(n){let e,l,t;return l=new Ji({props:{$$slots:{popover:[Wi],popoverClick:[Qi]},$$scope:{ctx:n}}}),{c(){e=y("div"),S(l.$$.fragment),this.h()},l(i){e=M(i,"DIV",{id:!0,class:!0});var s=P(e);V(l.$$.fragment,s),s.forEach(h),this.h()},h(){b(e,"id","layer-btns"),b(e,"class","svelte-1jv35sd")},m(i,s){E(i,e,s),z(l,e,null),t=!0},p(i,[s]){const r={};s&66&&(r.$$scope={dirty:s,ctx:i}),l.$set(r)},i(i){t||(v(l.$$.fragment,i),t=!0)},o(i){k(l.$$.fragment,i),t=!1},d(i){i&&h(e),L(l)}}}function Yi(n,e,l){let t,i=j,s=()=>(i(),i=Le(r,u=>l(1,t=u)),r);n.$$.on_destroy.push(()=>i());let{store:r}=e;s();const o=u=>{F(r,t.techniqueMappingMode=u,t)},a=()=>o(re.multiColor),c=()=>o(re.childrenMultiColor),f=()=>o(re.heatMap);return n.$$set=u=>{"store"in u&&s(l(0,r=u.store))},[r,t,o,a,c,f]}class xi extends le{constructor(e){super(),ne(this,e,Yi,Xi,te,{store:0})}}function al(n){let e,l,t,i;return e=new J({props:{size:33,iconName:"import",description:"Import Profile",title:"Import Profile",$$slots:{default:[es]},$$scope:{ctx:n}}}),e.$on("iconClick",n[4]),t=new J({props:{size:33,iconName:"export",description:"Export Profile",title:"Export Profile"}}),t.$on("iconClick",n[6]),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment)},l(s){V(e.$$.fragment,s),l=O(s),V(t.$$.fragment,s)},m(s,r){z(e,s,r),E(s,l,r),z(t,s,r),i=!0},p(s,r){const o={};r&1030&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){i||(v(e.$$.fragment,s),v(t.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(t.$$.fragment,s),i=!1},d(s){s&&h(l),L(e,s),L(t,s)}}}function es(n){let e,l,t;return{c(){e=y("input"),this.h()},l(i){e=M(i,"INPUT",{type:!0,id:!0,name:!0,accept:!0}),this.h()},h(){b(e,"type","file"),b(e,"id","file"),b(e,"name","file"),e.hidden=!0,b(e,"accept",".json")},m(i,s){E(i,e,s),n[8](e),l||(t=[B(e,"change",n[9]),B(e,"change",n[5])],l=!0)},p:j,d(i){i&&h(e),n[8](null),l=!1,de(t)}}}function ts(n){let e,l,t=!n[3].isReadonly&&al(n);return{c(){t&&t.c(),e=ce()},l(i){t&&t.l(i),e=ce()},m(i,s){t&&t.m(i,s),E(i,e,s),l=!0},p(i,[s]){i[3].isReadonly?t&&(W(),k(t,1,1,()=>{t=null}),X()):t?(t.p(i,s),s&8&&v(t,1)):(t=al(i),t.c(),v(t,1),t.m(e.parentNode,e))},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d(i)}}}function ls(n,e,l){let t,i=j,s=()=>(i(),i=Le(r,d=>l(3,t=d)),r);n.$$.on_destroy.push(()=>i());let{store:r}=e;s();let{storeProp:o}=e,a,c;const f=()=>{a.click()},u=async()=>{const d=await a.files[0];if(d){let g;try{g=JSON.parse(await d.text())}catch(C){return alert("Unable to parse file"),console.error(C)}r.set(g),alert("Profile imported Successfully")}},p=()=>{const d=JSON.stringify(t),g=new Blob([d],{type:"application/json;charset=utf-8"});cn(g,"d3fend-profile.json")};function m(d){we[d?"unshift":"push"](()=>{a=d,l(1,a)})}function _(){c=this.files,l(2,c)}return n.$$set=d=>{"store"in d&&s(l(0,r=d.store)),"storeProp"in d&&l(7,o=d.storeProp)},[r,a,c,t,f,u,p,o,m,_]}class ns extends le{constructor(e){super(),ne(this,e,ls,ts,te,{store:0,storeProp:7})}}const is=n=>({store:n&1}),cl=n=>({H:n[1],store:n[0]});function ss(n){let e,l;const t=n[3].default,i=_e(t,n,n[2],cl);return{c(){e=y("section"),i&&i.c(),this.h()},l(s){e=M(s,"SECTION",{id:!0,class:!0});var r=P(e);i&&i.l(r),r.forEach(h),this.h()},h(){b(e,"id","header--container"),b(e,"class","svelte-12ygfxa")},m(s,r){E(s,e,r),i&&i.m(e,null),l=!0},p(s,[r]){i&&i.p&&(!l||r&5)&&he(i,t,s,s[2],l?ge(t,s[2],r,is):be(s[2]),cl)},i(s){l||(v(i,s),l=!0)},o(s){k(i,s),l=!1},d(s){s&&h(e),i&&i.d(s)}}}function rs(n,e,l){let{$$slots:t={},$$scope:i}=e,{store:s}=e;const r={ProfileButtons:Bi,ProfileSelect:ji,MappingMode:xi,ExportImport:ns};return n.$$set=o=>{"store"in o&&l(0,s=o.store),"$$scope"in o&&l(2,i=o.$$scope)},[s,r,i,t]}class Dl extends le{constructor(e){super(),ne(this,e,rs,ss,te,{store:0})}}function os(n){let e,l,t,i,s,r,o,a;return e=new n[24].ProfileButtons({props:{store:Y,selectedProfile:n[6]}}),t=new n[24].ProfileSelect({props:{store:Y,selectedProfile:n[6]}}),s=new n[24].MappingMode({props:{store:Y}}),o=new n[24].ExportImport({props:{store:Y,storeProp:ze.layers}}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),S(s.$$.fragment),r=D(),S(o.$$.fragment)},l(c){V(e.$$.fragment,c),l=O(c),V(t.$$.fragment,c),i=O(c),V(s.$$.fragment,c),r=O(c),V(o.$$.fragment,c)},m(c,f){z(e,c,f),E(c,l,f),z(t,c,f),E(c,i,f),z(s,c,f),E(c,r,f),z(o,c,f),a=!0},p:j,i(c){a||(v(e.$$.fragment,c),v(t.$$.fragment,c),v(s.$$.fragment,c),v(o.$$.fragment,c),a=!0)},o(c){k(e.$$.fragment,c),k(t.$$.fragment,c),k(s.$$.fragment,c),k(o.$$.fragment,c),a=!1},d(c){c&&(h(l),h(i),h(r)),L(e,c),L(t,c),L(s,c),L(o,c)}}}function fl(n){let e,l,t,i;return e=new J({props:{size:33,iconName:"plus_circle",description:"Create Capability",title:"Create Capability",disabled:!n[0].profiles.length>0}}),e.$on("iconClick",n[14]),t=new J({props:{size:35,iconName:"copy",description:"Copy From Templates",title:"Copy From Templates",disabled:!n[0].profiles.length>0}}),t.$on("iconClick",n[15]),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment)},l(s){V(e.$$.fragment,s),l=O(s),V(t.$$.fragment,s)},m(s,r){z(e,s,r),E(s,l,r),z(t,s,r),i=!0},p(s,r){const o={};r&1&&(o.disabled=!s[0].profiles.length>0),e.$set(o);const a={};r&1&&(a.disabled=!s[0].profiles.length>0),t.$set(a)},i(s){i||(v(e.$$.fragment,s),v(t.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(t.$$.fragment,s),i=!1},d(s){s&&h(l),L(e,s),L(t,s)}}}function as(n){let e,l,t=!n[0].isReadonly&&fl(n);return{c(){e=y("div"),t&&t.c(),this.h()},l(i){e=M(i,"DIV",{id:!0,slot:!0});var s=P(e);t&&t.l(s),s.forEach(h),this.h()},h(){b(e,"id","capability--btns"),b(e,"slot","buttons")},m(i,s){E(i,e,s),t&&t.m(e,null),l=!0},p(i,s){i[0].isReadonly?t&&(W(),k(t,1,1,()=>{t=null}),X()):t?(t.p(i,s),s&1&&v(t,1)):(t=fl(i),t.c(),v(t,1),t.m(e,null))},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d()}}}function ul(n){let e,l;return e=new rt({props:{$$slots:{default:[ds,({M:t,item:i})=>({22:t,23:i}),({M:t,item:i})=>(t?4194304:0)|(i?8388608:0)]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i&41943042&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function cs(n){let e;return{c(){e=G("Create Capability")},l(l){e=K(l,"Create Capability")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function fs(n){let e;return{c(){e=G("Create")},l(l){e=K(l,"Create")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function us(n){let e;return{c(){e=G("Cancel")},l(l){e=K(l,"Cancel")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function ds(n){let e,l,t,i,s,r;return e=new n[22].Title({props:{$$slots:{default:[cs]},$$scope:{ctx:n}}}),t=new n[22].Create({props:{item:n[23],textInput:"Name",textArea:"Description"}}),s=new n[22].Buttons({props:{item:n[23],handleCloseModal:n[12],handleOnSubmit:n[16],$$slots:{cancel:[us],submit:[fs]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),S(s.$$.fragment)},l(o){V(e.$$.fragment,o),l=O(o),V(t.$$.fragment,o),i=O(o),V(s.$$.fragment,o)},m(o,a){z(e,o,a),E(o,l,a),z(t,o,a),E(o,i,a),z(s,o,a),r=!0},p(o,a){const c={};a&33554432&&(c.$$scope={dirty:a,ctx:o}),e.$set(c);const f={};a&8388608&&(f.item=o[23]),t.$set(f);const u={};a&8388608&&(u.item=o[23]),a&2&&(u.handleOnSubmit=o[16]),a&33554432&&(u.$$scope={dirty:a,ctx:o}),s.$set(u)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),v(s.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),k(t.$$.fragment,o),k(s.$$.fragment,o),r=!1},d(o){o&&(h(l),h(i)),L(e,o),L(t,o),L(s,o)}}}function dl(n){let e,l;return e=new Wn({props:{dialog:n[3],title:"Copy Capability From Templates",store:n[0].templates,copyHandler:n[10]}}),e.$on("closeModal",n[11]),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i&8&&(s.dialog=t[3]),i&1&&(s.store=t[0].templates),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ps(n){let e,l,t,i,s,r,o,a,c,f,u,p,m,_,d,g;t=new Dl({props:{$$slots:{default:[os,({H:$})=>({24:$}),({H:$})=>$?16777216:0]},$$scope:{ctx:n}}}),r=new Pl({props:{capabilities:n[5]?.includedLayers||[],store:Y,storeProp:ze.layers,handlers:n[13],$$slots:{buttons:[as]},$$scope:{ctx:n}}}),c=new Tl({});let C=n[2]&&ul(n),N=n[4]&&dl(n);return{c(){e=y("main"),l=y("section"),S(t.$$.fragment),i=D(),s=y("section"),S(r.$$.fragment),o=D(),a=y("section"),S(c.$$.fragment),f=D(),u=y("dialog"),C&&C.c(),p=D(),m=y("dialog"),N&&N.c(),this.h()},l($){e=M($,"MAIN",{class:!0});var I=P(e);l=M(I,"SECTION",{id:!0});var A=P(l);V(t.$$.fragment,A),A.forEach(h),i=O(I),s=M(I,"SECTION",{id:!0});var H=P(s);V(r.$$.fragment,H),H.forEach(h),o=O(I),a=M(I,"SECTION",{id:!0});var U=P(a);V(c.$$.fragment,U),U.forEach(h),f=O(I),u=M(I,"DIALOG",{id:!0});var ie=P(u);C&&C.l(ie),ie.forEach(h),p=O(I),m=M(I,"DIALOG",{id:!0});var R=P(m);N&&N.l(R),R.forEach(h),I.forEach(h),this.h()},h(){b(l,"id","container-header"),b(s,"id","container-layer"),b(a,"id","container-btns"),u.open=n[2],b(u,"id","capability--dialog"),m.open=n[4],b(m,"id","capability--dialog"),b(e,"class","svelte-1mkmdvu")},m($,I){E($,e,I),w(e,l),z(t,l,null),w(e,i),w(e,s),z(r,s,null),w(e,o),w(e,a),z(c,a,null),w(e,f),w(e,u),C&&C.m(u,null),n[17](u),w(e,p),w(e,m),N&&N.m(m,null),n[19](m),_=!0,d||(g=[B(u,"close",n[18]),B(m,"close",n[20])],d=!0)},p($,[I]){const A={};I&33554432&&(A.$$scope={dirty:I,ctx:$}),t.$set(A);const H={};I&32&&(H.capabilities=$[5]?.includedLayers||[]),I&33554433&&(H.$$scope={dirty:I,ctx:$}),r.$set(H),$[2]?C?(C.p($,I),I&4&&v(C,1)):(C=ul($),C.c(),v(C,1),C.m(u,null)):C&&(W(),k(C,1,1,()=>{C=null}),X()),(!_||I&4)&&(u.open=$[2]),$[4]?N?(N.p($,I),I&16&&v(N,1)):(N=dl($),N.c(),v(N,1),N.m(m,null)):N&&(W(),k(N,1,1,()=>{N=null}),X()),(!_||I&16)&&(m.open=$[4])},i($){_||(v(t.$$.fragment,$),v(r.$$.fragment,$),v(c.$$.fragment,$),v(C),v(N),_=!0)},o($){k(t.$$.fragment,$),k(r.$$.fragment,$),k(c.$$.fragment,$),k(C),k(N),_=!1},d($){$&&h(e),L(t),L(r),L(c),C&&C.d(),n[17](null),N&&N.d(),n[19](null),d=!1,de(g)}}}function ms(n,e,l){let t,i;ue(n,Y,R=>l(0,t=R));const s=He(t.profiles[t?.selectedProfile]);ue(n,s,R=>l(5,i=R));let r,o=!1,a,c=!1;const f=R=>{confirm("Deleting Capability with remove all subcapabilities and associated Techniques.")&&Y.deleteLayer(R.id)},u=R=>{l(2,o=!0),r.showModal()},p=R=>{l(4,c=!0),a.showModal()},m=({name:R,description:se},Oe)=>{const Ne={id:dt(R),name:R,description:se,techniques:[],children:[],checked:!1,color:"#0075FF"};Y.addLayer(Ne),Oe.close()},_=R=>{const{newArray:se,mappedIds:Oe}=R.reduce(($e,Ie)=>{const Se=dt(Ie.name);return $e.newArray.push({...Ie,id:Se}),$e.mappedIds[Ie.id]=Se,$e},{newArray:[],mappedIds:{}}),Ne=pn(se,Oe);Y.bulkAddLayer(Ne,Ne[0].id)},d=({detail:{dialog:R,dialogName:se}})=>{se==="copy"?(l(4,c=!1),a.close()):se==="create"&&l(2,o=!1)},g=()=>{l(2,o=!1),r.close()},C={deleteCapability:f},N=R=>u(),$=R=>p(),I=R=>m(R,r);function A(R){we[R?"unshift":"push"](()=>{r=R,l(1,r)})}const H=()=>l(2,o=!1);function U(R){we[R?"unshift":"push"](()=>{a=R,l(3,a)})}const ie=()=>l(4,c=!1);return n.$$.update=()=>{n.$$.dirty&1&&F(s,i=t?.profiles[t?.selectedProfile]||{name:""},i)},[t,r,o,a,c,i,s,u,p,m,_,d,g,C,N,$,I,A,H,U,ie]}class _s extends le{constructor(e){super(),ne(this,e,ms,ps,te,{})}}function hs(n){let e,l;return e=new n[14].MappingMode({props:{store:Y}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function pl(n){let e,l;return e=new J({props:{size:33,iconName:"plus_circle",description:"Create Template Capability",title:"Create Template Capability"}}),e.$on("iconClick",n[7]),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function bs(n){let e,l,t=!n[2].isReadonly&&pl(n);return{c(){e=y("div"),t&&t.c(),this.h()},l(i){e=M(i,"DIV",{id:!0,slot:!0});var s=P(e);t&&t.l(s),s.forEach(h),this.h()},h(){b(e,"id","capability--btns"),b(e,"slot","buttons")},m(i,s){E(i,e,s),t&&t.m(e,null),l=!0},p(i,s){i[2].isReadonly?t&&(W(),k(t,1,1,()=>{t=null}),X()):t?(t.p(i,s),s&4&&v(t,1)):(t=pl(i),t.c(),v(t,1),t.m(e,null))},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d()}}}function ml(n){let e,l;return e=new rt({props:{$$slots:{default:[Cs,({M:t,item:i})=>({12:t,13:i}),({M:t,item:i})=>(t?4096:0)|(i?8192:0)]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p(t,i){const s={};i&40961&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function gs(n){let e;return{c(){e=G("Create Template Capability")},l(l){e=K(l,"Create Template Capability")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function $s(n){let e;return{c(){e=G("Create")},l(l){e=K(l,"Create")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function vs(n){let e;return{c(){e=G("Cancel")},l(l){e=K(l,"Cancel")},m(l,t){E(l,e,t)},d(l){l&&h(e)}}}function Cs(n){let e,l,t,i,s,r;return e=new n[12].Title({props:{$$slots:{default:[gs]},$$scope:{ctx:n}}}),t=new n[12].Create({props:{item:n[13],textInput:"Name",textArea:"Description"}}),s=new n[12].Buttons({props:{item:n[13],handleCloseModal:n[4],handleOnSubmit:n[8],$$slots:{cancel:[vs],submit:[$s]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),S(s.$$.fragment)},l(o){V(e.$$.fragment,o),l=O(o),V(t.$$.fragment,o),i=O(o),V(s.$$.fragment,o)},m(o,a){z(e,o,a),E(o,l,a),z(t,o,a),E(o,i,a),z(s,o,a),r=!0},p(o,a){const c={};a&32768&&(c.$$scope={dirty:a,ctx:o}),e.$set(c);const f={};a&8192&&(f.item=o[13]),t.$set(f);const u={};a&8192&&(u.item=o[13]),a&1&&(u.handleOnSubmit=o[8]),a&32768&&(u.$$scope={dirty:a,ctx:o}),s.$set(u)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),v(s.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),k(t.$$.fragment,o),k(s.$$.fragment,o),r=!1},d(o){o&&(h(l),h(i)),L(e,o),L(t,o),L(s,o)}}}function ks(n){let e,l,t,i,s,r,o,a,c,f,u,p,m,_;t=new Dl({props:{$$slots:{default:[hs,({H:g})=>({14:g}),({H:g})=>g?16384:0]},$$scope:{ctx:n}}}),r=new Pl({props:{capabilities:n[2].rootTemplates||[],store:Y,storeProp:ze.templates,handlers:n[6],$$slots:{buttons:[bs]},$$scope:{ctx:n}}}),c=new Tl({props:{selectedStore:ze.templates}});let d=n[1]&&ml(n);return{c(){e=y("main"),l=y("section"),S(t.$$.fragment),i=D(),s=y("section"),S(r.$$.fragment),o=D(),a=y("section"),S(c.$$.fragment),f=D(),u=y("dialog"),d&&d.c(),this.h()},l(g){e=M(g,"MAIN",{class:!0});var C=P(e);l=M(C,"SECTION",{id:!0});var N=P(l);V(t.$$.fragment,N),N.forEach(h),i=O(C),s=M(C,"SECTION",{id:!0});var $=P(s);V(r.$$.fragment,$),$.forEach(h),o=O(C),a=M(C,"SECTION",{id:!0});var I=P(a);V(c.$$.fragment,I),I.forEach(h),f=O(C),u=M(C,"DIALOG",{id:!0});var A=P(u);d&&d.l(A),A.forEach(h),C.forEach(h),this.h()},h(){b(l,"id","container-header"),b(s,"id","container-layer"),b(a,"id","container-btns"),u.open=n[1],b(u,"id","capability--dialog"),b(e,"class","svelte-1mkmdvu")},m(g,C){E(g,e,C),w(e,l),z(t,l,null),w(e,i),w(e,s),z(r,s,null),w(e,o),w(e,a),z(c,a,null),w(e,f),w(e,u),d&&d.m(u,null),n[9](u),p=!0,m||(_=B(u,"close",n[10]),m=!0)},p(g,[C]){const N={};C&32768&&(N.$$scope={dirty:C,ctx:g}),t.$set(N);const $={};C&4&&($.capabilities=g[2].rootTemplates||[]),C&32772&&($.$$scope={dirty:C,ctx:g}),r.$set($),g[1]?d?(d.p(g,C),C&2&&v(d,1)):(d=ml(g),d.c(),v(d,1),d.m(u,null)):d&&(W(),k(d,1,1,()=>{d=null}),X()),(!p||C&2)&&(u.open=g[1])},i(g){p||(v(t.$$.fragment,g),v(r.$$.fragment,g),v(c.$$.fragment,g),v(d),p=!0)},o(g){k(t.$$.fragment,g),k(r.$$.fragment,g),k(c.$$.fragment,g),k(d),p=!1},d(g){g&&h(e),L(t),L(r),L(c),d&&d.d(),n[9](null),m=!1,_()}}}function ws(n,e,l){let t;ue(n,Y,d=>l(2,t=d));let i,s=!1;const r=d=>{confirm("Deleting Capability with remove all subcapabilities and associated Techniques.")&&Y.deleteTemplate(d.id)},o=d=>{l(1,s=!0),i.showModal()},a=()=>{l(1,s=!1),i.close()},c=({name:d,description:g},C)=>{const N={id:dt(d),name:d,description:g,techniques:[],children:[],checked:!1,color:"#0075FF"};Y.addTemplate(N),C.close()},f={deleteCapability:r},u=d=>o(),p=d=>c(d,i);function m(d){we[d?"unshift":"push"](()=>{i=d,l(0,i)})}return[i,s,t,o,a,c,f,u,p,m,()=>l(1,s=!1)]}class Es extends le{constructor(e){super(),ne(this,e,ws,ks,te,{})}}function ys(n){let e,l="D3FEND PROFILE";return{c(){e=y("h2"),e.textContent=l,this.h()},l(t){e=M(t,"H2",{class:!0,slot:!0,"data-svelte-h":!0}),ye(e)!=="svelte-u9fo7w"&&(e.textContent=l),this.h()},h(){b(e,"class","text-center fancy-font"),b(e,"slot","header")},m(t,i){E(t,e,i)},p:j,d(t){t&&h(e)}}}function Ms(n){let e,l,t,i,s;return l=new Pn({props:{tabs:n[0],activeTabValue:n[1],clickTab:n[3],$$slots:{header:[ys]},$$scope:{ctx:n}}}),{c(){e=y("section"),S(l.$$.fragment),this.h()},l(r){e=M(r,"SECTION",{class:!0});var o=P(e);V(l.$$.fragment,o),o.forEach(h),this.h()},h(){b(e,"class","svelte-qzr7y6")},m(r,o){E(r,e,o),z(l,e,null),s=!0},p(r,[o]){const a={};o&1&&(a.tabs=r[0]),o&2&&(a.activeTabValue=r[1]),o&32&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){s||(v(l.$$.fragment,r),r&&Ee(()=>{s&&(i&&i.end(1),t=st(e,Me,{delay:400}),t.start())}),s=!0)},o(r){k(l.$$.fragment,r),t&&t.invalidate(),r&&(i=Ml(e,Me,{duration:100})),s=!1},d(r){r&&h(e),L(l),r&&i&&i.end()}}}function Ts(n,e,l){let t,i,s;ue(n,Y,a=>l(4,i=a));const r=He(i.selectedStore);ue(n,r,a=>l(1,s=a));const o=(a,c)=>{F(r,s=a,s),F(Y,i.selectedStore=c,i)};return l(0,t=[{label:"Profiles",value:ze.layers,component:_s},{label:"Templates",value:ze.templates,component:Es}]),[t,s,r,o]}class Ns extends le{constructor(e){super(),ne(this,e,Ts,Ms,te,{})}}function _l(n,e,l){const t=n.slice();return t[4]=e[l],t}function hl(n){let e,l,t,i,s,r;return t=new J({props:{size:33,iconName:n[0]?.isDrawerOpen?"arrowLeft":"arrowRight",description:"Profile Controls",title:"Profile Controls",pathColor:"white"}}),{c(){e=y("div"),l=y("span"),S(t.$$.fragment),this.h()},l(o){e=M(o,"DIV",{id:!0,role:!0,tabindex:!0,class:!0});var a=P(e);l=M(a,"SPAN",{});var c=P(l);V(t.$$.fragment,c),c.forEach(h),a.forEach(h),this.h()},h(){b(e,"id","drawer-btn"),b(e,"role","button"),b(e,"tabindex","0"),b(e,"class","svelte-mz34j1")},m(o,a){E(o,e,a),w(e,l),z(t,l,null),i=!0,s||(r=[B(e,"click",n[2]),B(e,"keyup",null)],s=!0)},p(o,a){const c={};a&1&&(c.iconName=o[0]?.isDrawerOpen?"arrowLeft":"arrowRight"),t.$set(c)},i(o){i||(v(t.$$.fragment,o),i=!0)},o(o){k(t.$$.fragment,o),i=!1},d(o){o&&h(e),L(t),s=!1,de(r)}}}function bl(n){let e,l=Te(n[1].list.map(n[3]).reverse()),t=[];for(let i=0;i<l.length;i+=1)t[i]=$l(_l(n,l,i));return{c(){e=y("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=M(i,"DIV",{id:!0,class:!0});var s=P(e);for(let r=0;r<t.length;r+=1)t[r].l(s);s.forEach(h),this.h()},h(){b(e,"id","legend"),b(e,"class","svelte-mz34j1")},m(i,s){E(i,e,s);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(i,s){if(s&3){l=Te(i[1].list.map(i[3]).reverse());let r;for(r=0;r<l.length;r+=1){const o=_l(i,l,r);t[r]?t[r].p(o,s):(t[r]=$l(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){i&&h(e),Ke(t,i)}}}function gl(n){let e,l=n[4].name+"",t,i;return{c(){e=y("div"),t=G(l),i=D(),this.h()},l(s){e=M(s,"DIV",{class:!0,style:!0});var r=P(e);t=K(r,l),i=O(r),r.forEach(h),this.h()},h(){b(e,"class","legend-item svelte-mz34j1"),ae(e,"background",n[4].color)},m(s,r){E(s,e,r),w(e,t),w(e,i)},p(s,r){r&3&&l!==(l=s[4].name+"")&&De(t,l),r&3&&ae(e,"background",s[4].color)},d(s){s&&h(e)}}}function $l(n){let e,l=n[4].checked&&gl(n);return{c(){l&&l.c(),e=ce()},l(t){l&&l.l(t),e=ce()},m(t,i){l&&l.m(t,i),E(t,e,i)},p(t,i){t[4].checked?l?l.p(t,i):(l=gl(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&h(e),l&&l.d(t)}}}function Is(n){let e,l,t,i=!n[0]?.isReadonly&&hl(n),s=n[0]?.showLegend&&n[0]?.techniqueMappingMode!=="heatMap"&&n[1].list?.length>0&&bl(n);return{c(){i&&i.c(),e=D(),l=y("div"),s&&s.c(),this.h()},l(r){i&&i.l(r),e=O(r),l=M(r,"DIV",{id:!0,class:!0});var o=P(l);s&&s.l(o),o.forEach(h),this.h()},h(){b(l,"id","container-legend"),b(l,"class","svelte-mz34j1")},m(r,o){i&&i.m(r,o),E(r,e,o),E(r,l,o),s&&s.m(l,null),t=!0},p(r,[o]){r[0]?.isReadonly?i&&(W(),k(i,1,1,()=>{i=null}),X()):i?(i.p(r,o),o&1&&v(i,1)):(i=hl(r),i.c(),v(i,1),i.m(e.parentNode,e)),r[0]?.showLegend&&r[0]?.techniqueMappingMode!=="heatMap"&&r[1].list?.length>0?s?s.p(r,o):(s=bl(r),s.c(),s.m(l,null)):s&&(s.d(1),s=null)},i(r){t||(v(i),t=!0)},o(r){k(i),t=!1},d(r){r&&(h(e),h(l)),i&&i.d(r),s&&s.d()}}}function Ps(n,e,l){let t,i;ue(n,Y,o=>l(0,i=o));const s=()=>{F(Y,i.isDrawerOpen=!i.isDrawerOpen,i)},r=o=>i[t.store][o];return n.$$.update=()=>{n.$$.dirty&1&&l(1,t=i.selectedStore===ze.layers?{list:i?.profiles[i.selectedProfile]?.includedLayers,store:ze.layers}:{list:i?.rootTemplates,store:ze.templates})},[i,t,s,r]}class Ds extends le{constructor(e){super(),ne(this,e,Ps,Is,te,{})}}const Os=(n,e)=>{const l={max:0,count:{},highlighted:{}};return dn([n,e],([t,i],s)=>{if(!i?.tree.length||!n){s(mn);return}l.count={},l.highlighted=Object.entries(l.highlighted).reduce((u,[p,m])=>(u[p]=!1,u),{});const r=t.techniqueMappingMode===re.multiColor,o=t.selectedStore===ze.layers?{list:t.profiles[t?.selectedProfile].includedLayers||[],store:t?.layers}:{list:t?.rootTemplates,store:t?.templates},{highlightedTechniques:a,techniqueColors:c}=Ol(o.list,o.store,r,0),f=Object.entries(c).reduce((u,[p,m])=>(u[p]=[...new Set(m)],u),{});a.forEach(u=>{l.highlighted[u]=!0,l.count[u]?l.count[u]+=1:l.count[u]=1}),l.max=Object.values(l.count).reduce((u,p)=>u>p?u:p,-1/0),Object.entries(l.highlighted).forEach(([u,p])=>{if(p){const m=zs[t.techniqueMappingMode]({colors:f[u],count:l.count,max:l.max,technique:u});i.treeMap[u].classes.isHighlighted=!0,i.treeMap[u].classes.color=m}else i.treeMap[u].classes.isHighlighted=!1,i.treeMap[u].classes.color=null}),s(i)})},vl=n=>{const{colors:e}=n,l=e.length,t=l-1,i=(1/l*100).toFixed(1);if(l===1)return e[0];let s="linear-gradient( to right,";for(let r=0;r<l;r++){const o=e[r];if(r===0){s+=` ${o} ${i}%`;continue}if(r===t){s+=`, ${o} ${i*t}%`;continue}s+=`, ${o} ${i*r}% ${i*(r+1)}%`}return s+=")",s},Ss=n=>{const{count:e,max:l,technique:t}=n,i=e[t]/l*100;return`color-mix(in srgb, green ${i<20?20:i}%, white)`},zs={[re.multiColor]:n=>vl(n),[re.heatMap]:n=>Ss(n),[re.childrenMultiColor]:n=>vl(n)},Ol=(n=[],e,l,t,i=null,s=[],r={})=>{for(let o=0;o<n.length;o++){const a=e[n[o]],c=t===0||!l?a.color:i,f=t+1;a.checked&&(s.push(...a.techniques),a.techniques.forEach(u=>{(r[u]||(r[u]=[]))&&r[u].push(c)})),a.children&&Ol(a.children,e,l,f,c,s,r)}return{highlightedTechniques:s,techniqueColors:r}},Ls=Os(Y,Ge);function Vs(n){let e,l;return e=new Ns({props:{slot:"drawer"}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function qs(n){let e,l;return e=new bn({props:{treeStore:Ls,theme:"main",slot:"matrix",scroll_indicator:!1}}),e.$on("elementClick",n[4]),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Hs(n){let e,l;return e=new Ds({props:{slot:"legend"}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){z(e,t,i),l=!0},p:j,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function As(n){return{c:j,l:j,m:j,p:j,i:j,o:j,d:j}}function Bs(n){let e,l,t=n[3]&&Cl(n);return{c(){t&&t.c(),e=ce()},l(i){t&&t.l(i),e=ce()},m(i,s){t&&t.m(i,s),E(i,e,s),l=!0},p(i,s){i[3]?t?(t.p(i,s),s&8&&v(t,1)):(t=Cl(i),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),k(t,1,1,()=>{t=null}),X())},i(i){l||(v(t),l=!0)},o(i){k(t),l=!1},d(i){i&&h(e),t&&t.d(i)}}}function Cl(n){let e,l="esc",t,i,s,r,o;return i=new $n({props:{technique_id:n[0].technique_id,technique:n[16]}}),{c(){e=y("button"),e.textContent=l,t=D(),S(i.$$.fragment)},l(a){e=M(a,"BUTTON",{"data-svelte-h":!0}),ye(e)!=="svelte-1ejhv6h"&&(e.textContent=l),t=O(a),V(i.$$.fragment,a)},m(a,c){E(a,e,c),E(a,t,c),z(i,a,c),s=!0,r||(o=B(e,"click",pt(n[8])),r=!0)},p(a,c){const f={};c&1&&(f.technique_id=a[0].technique_id),c&8&&(f.technique=a[16]),i.$set(f)},i(a){s||(v(i.$$.fragment,a),s=!0)},o(a){k(i.$$.fragment,a),s=!1},d(a){a&&(h(e),h(t)),L(i,a),r=!1,o()}}}function Zs(n){let e,l="loading...";return{c(){e=y("span"),e.textContent=l},l(t){e=M(t,"SPAN",{"data-svelte-h":!0}),ye(e)!=="svelte-sermp4"&&(e.textContent=l)},m(t,i){E(t,e,i)},p:j,i:j,o:j,d(t){t&&h(e)}}}function Rs(n){let e,l,t,i,s,r,o,a,c,f,u,p;e=new gn({props:{title:"D3FEND Profile Studio",og_title:"D3FEND Profile Studio",og_type:"website",og_url:"https://d3fend.mitre.org/",og_image:"https://d3fend.mitre.org/img/d3fend-og.png",og_description:"D3FEND Profile Studio lets you organize and communicate your defensive cyber capabilities!"}}),t=new Mn({props:{$$slots:{legend:[Hs],matrix:[qs],drawer:[Vs]},$$scope:{ctx:n}}});let m={ctx:n,current:null,token:null,hasCatch:!1,pending:Zs,then:Bs,catch:As,value:16,blocks:[,,,]};return vt(r=n[3],m),c=new fn({}),{c(){S(e.$$.fragment),l=D(),S(t.$$.fragment),i=D(),s=y("dialog"),m.block.c(),o=D(),a=y("dialog"),S(c.$$.fragment),this.h()},l(_){V(e.$$.fragment,_),l=O(_),V(t.$$.fragment,_),i=O(_),s=M(_,"DIALOG",{class:!0});var d=P(s);m.block.l(d),d.forEach(h),o=O(_),a=M(_,"DIALOG",{class:!0});var g=P(a);V(c.$$.fragment,g),g.forEach(h),this.h()},h(){b(s,"class","technique-dialog"),b(a,"class","iframe-dialog")},m(_,d){z(e,_,d),E(_,l,d),z(t,_,d),E(_,i,d),E(_,s,d),m.block.m(s,m.anchor=null),m.mount=()=>s,m.anchor=null,n[9](s),E(_,o,d),E(_,a,d),z(c,a,null),n[11](a),f=!0,u||(p=[B(s,"close",n[10]),B(a,"close",n[12])],u=!0)},p(_,[d]){n=_;const g={};d&131072&&(g.$$scope={dirty:d,ctx:n}),t.$set(g),m.ctx=n,d&8&&r!==(r=n[3])&&vt(r,m)||sn(m,n,d)},i(_){f||(v(e.$$.fragment,_),v(t.$$.fragment,_),v(m.block),v(c.$$.fragment,_),f=!0)},o(_){k(e.$$.fragment,_),k(t.$$.fragment,_);for(let d=0;d<3;d+=1){const g=m.blocks[d];k(g)}k(c.$$.fragment,_),f=!1},d(_){_&&(h(l),h(i),h(s),h(o),h(a)),L(e,_),L(t,_),m.block.d(),m.token=null,m=null,n[9](null),L(c),n[11](null),u=!1,de(p)}}}function js(n,e,l){let t,i;ue(n,on,$=>l(7,t=$)),ue(n,Y,$=>l(14,i=$));let{data:s}=e,r,o,a,c=null,f=!1;wl(()=>{if(window.location!==window.parent.location&&(f=!0),!f&&i.localStorageWarning&&a.showModal(),l(6,r=document.getElementsByTagName("body")[0]),t.url.searchParams.size){const $=t.url.searchParams.get("technique_id"),I=t.url.searchParams.get("technique_id");if($&&(l(3,c=m(s.technique_id)),ot(`/profile/?technique_id=${techniqueIdQueryParam}`)),I){const A=un.uncrush(s.profile),H=JSON.parse(A);F(Y,i=H,i)}}}),an(()=>{r?.classList.remove("scroll--none")});const u=$=>{const I=$.detail.element["@id"];if(!$.detail.event.ctrlKey&&!$.detail.event.metaKey){const A=$.detail.element["@id"];l(3,c=m(A)),ot(`/profile/?technique_id=${A}`);return}Ge.selectTechnique(I)},p=$=>{$.close(),ot("/profile/")},m=async $=>{const I=await fetch(`/api/technique/${$}.json`),A=await I.json();if(I.ok)return A;throw new Error(A)},_=()=>p(o);function d($){we[$?"unshift":"push"](()=>{o=$,l(1,o)})}const g=()=>p(o);function C($){we[$?"unshift":"push"](()=>{a=$,l(2,a)})}const N=()=>p(a);return n.$$set=$=>{"data"in $&&l(0,s=$.data)},n.$$.update=()=>{n.$$.dirty&194&&(o&&t.url.searchParams.get("technique_id")?(o.showModal(),r?.classList.add("scroll--none")):o&&(o.close(),r?.classList.remove("scroll--none")))},[s,o,a,c,u,p,r,t,_,d,g,C,N]}class ar extends le{constructor(e){super(),ne(this,e,js,Rs,te,{data:0})}}export{ar as component};
