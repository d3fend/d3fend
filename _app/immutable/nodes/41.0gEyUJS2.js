import{s as Y,c as te,e as k,d as q,f as E,i as d,w as g,H as R,k as T,l as y,u as le,g as se,a as ne,b as w,A,j as D,v as J,M as H,p as I,_ as re,y as ae,o as oe,q as ie,t as N,h as O,m as z,I as K}from"../chunks/scheduler.rYb7pZZG.js";import{S as Q,i as V,t as j,a as C,c as W,b as X,m as Z,e as $,d as x,g as ee}from"../chunks/index.DuGWJhq4.js";import{e as B}from"../chunks/each.shjUScpc.js";/* empty css                                                     */import{c as S}from"../chunks/config.Y0yThVB8.js";import"../chunks/entry.8gGhBGir.js";import{T as fe}from"../chunks/Title.-2iHfz2o.js";import{p as ue}from"../chunks/stores.CeV6jFzo.js";function ce(c){let e,n,s,o,i;const _=c[4].default,f=te(_,c,c[3],null);return{c(){e=k("a"),n=k("button"),f&&f.c(),this.h()},l(t){e=q(t,"A",{href:!0,title:!0});var a=E(e);n=q(a,"BUTTON",{class:!0});var l=E(n);f&&f.l(l),l.forEach(d),a.forEach(d),this.h()},h(){g(n,"class",s=R(c[2])+" svelte-1lh49rh"),g(e,"href",o=S.prefix+"/ontology/describe/"+c[0]),g(e,"title",c[1])},m(t,a){T(t,e,a),y(e,n),f&&f.m(n,null),i=!0},p(t,[a]){f&&f.p&&(!i||a&8)&&le(f,_,t,t[3],i?ne(_,t[3],a,null):se(t[3]),null),(!i||a&4&&s!==(s=R(t[2])+" svelte-1lh49rh"))&&g(n,"class",s),(!i||a&1&&o!==(o=S.prefix+"/ontology/describe/"+t[0]))&&g(e,"href",o),(!i||a&2)&&g(e,"title",t[1])},i(t){i||(j(f,t),i=!0)},o(t){C(f,t),i=!1},d(t){t&&d(e),f&&f.d(t)}}}function _e(c,e,n){let{$$slots:s={},$$scope:o}=e,{entity:i}=e,{title:_=""}=e,{size:f=""}=e;return c.$$set=t=>{"entity"in t&&n(0,i=t.entity),"title"in t&&n(1,_=t.title),"size"in t&&n(2,f=t.size),"$$scope"in t&&n(3,o=t.$$scope)},[i,_,f,o,s]}class he extends Q{constructor(e){super(),V(this,e,_e,ce,Y,{entity:0,title:1,size:2})}}function M(c,e,n){const s=c.slice();return s[9]=e[n],s}function U(c,e,n){const s=c.slice();return s[12]=e[n],s[14]=n,s}function F(c){let e,n="LOADING";return{c(){e=k("h3"),e.textContent=n},l(s){e=q(s,"H3",{"data-svelte-h":!0}),J(e)!=="svelte-1qn523e"&&(e.textContent=n)},m(s,o){T(s,e,o)},d(s){s&&d(e)}}}function L(c){let e,n,s,o,i,_,f=B(c[1]),t=[];for(let l=0;l<f.length;l+=1)t[l]=G(M(c,f,l));const a=l=>C(t[l],1,1,()=>{t[l]=null});return{c(){e=k("h3"),n=N("Results for: "),s=N(c[0]),o=w(),i=k("table");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=q(l,"H3",{});var r=E(e);n=O(r,"Results for: "),s=O(r,c[0]),r.forEach(d),o=D(l),i=q(l,"TABLE",{class:!0});var u=E(i);for(let m=0;m<t.length;m+=1)t[m].l(u);u.forEach(d),this.h()},h(){g(i,"class","")},m(l,r){T(l,e,r),y(e,n),y(e,s),T(l,o,r),T(l,i,r);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(i,null);_=!0},p(l,r){if((!_||r&1)&&z(s,l[0]),r&2){f=B(l[1]);let u;for(u=0;u<f.length;u+=1){const m=M(l,f,u);t[u]?(t[u].p(m,r),j(t[u],1)):(t[u]=G(m),t[u].c(),j(t[u],1),t[u].m(i,null))}for(ee(),u=f.length;u<t.length;u+=1)a(u);$()}},i(l){if(!_){for(let r=0;r<f.length;r+=1)j(t[r]);_=!0}},o(l){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)C(t[r]);_=!1},d(l){l&&(d(e),d(o),d(i)),K(t,l)}}}function me(c){let e=c[9]["@id"]+"",n;return{c(){n=N(e)},l(s){n=O(s,e)},m(s,o){T(s,n,o)},p(s,o){o&2&&e!==(e=s[9]["@id"]+"")&&z(n,e)},d(s){s&&d(n)}}}function P(c){let e,n,s=c[12][0]+"",o,i,_=c[12][1]+"",f;return{c(){e=k("tr"),n=k("td"),o=N(s),i=k("td"),f=N(_),this.h()},l(t){e=q(t,"TR",{});var a=E(e);n=q(a,"TD",{class:!0,colspan:!0});var l=E(n);o=O(l,s),l.forEach(d),i=q(a,"TD",{class:!0});var r=E(i);f=O(r,_),r.forEach(d),a.forEach(d),this.h()},h(){g(n,"class","text-right text-bold predicate svelte-1lgeke3"),g(n,"colspan","2"),g(i,"class","object svelte-1lgeke3")},m(t,a){T(t,e,a),y(e,n),y(n,o),y(e,i),y(i,f)},p(t,a){a&2&&s!==(s=t[12][0]+"")&&z(o,s),a&2&&_!==(_=t[12][1]+"")&&z(f,_)},d(t){t&&d(e)}}}function G(c){let e,n,s,o,i,_,f;o=new he({props:{size:"small",entity:c[9]["@id"],color:"#ccc",$$slots:{default:[me]},$$scope:{ctx:c}}});let t=B(Object.entries(c[9])),a=[];for(let l=0;l<t.length;l+=1)a[l]=P(U(c,t,l));return{c(){e=k("tbody"),n=k("tr"),s=k("td"),W(o.$$.fragment),i=w();for(let l=0;l<a.length;l+=1)a[l].c();_=w(),this.h()},l(l){e=q(l,"TBODY",{class:!0});var r=E(e);n=q(r,"TR",{});var u=E(n);s=q(u,"TD",{colspan:!0,class:!0});var m=E(s);X(o.$$.fragment,m),m.forEach(d),u.forEach(d),i=D(r);for(let p=0;p<a.length;p+=1)a[p].l(r);_=D(r),r.forEach(d),this.h()},h(){g(s,"colspan","3"),g(s,"class","font-medium subject svelte-1lgeke3"),g(e,"class","font-small svelte-1lgeke3")},m(l,r){T(l,e,r),y(e,n),y(n,s),Z(o,s,null),y(e,i);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);y(e,_),f=!0},p(l,r){const u={};if(r&2&&(u.entity=l[9]["@id"]),r&32770&&(u.$$scope={dirty:r,ctx:l}),o.$set(u),r&2){t=B(Object.entries(l[9]));let m;for(m=0;m<t.length;m+=1){const p=U(l,t,m);a[m]?a[m].p(p,r):(a[m]=P(p),a[m].c(),a[m].m(e,_))}for(;m<a.length;m+=1)a[m].d(1);a.length=t.length}},i(l){f||(j(o.$$.fragment,l),f=!0)},o(l){C(o.$$.fragment,l),f=!1},d(l){l&&d(e),x(o),K(a,l)}}}function de(c){let e,n,s,o,i,_,f="Search",t,a,l,r,u,m;e=new fe({props:{title:"Search"}});let p=c[2]&&F(),b=c[1]&&L(c);return{c(){W(e.$$.fragment),n=w(),s=k("form"),o=k("input"),i=w(),_=k("button"),_.textContent=f,t=w(),p&&p.c(),a=w(),b&&b.c(),l=A(),this.h()},l(h){X(e.$$.fragment,h),n=D(h),s=q(h,"FORM",{});var v=E(s);o=q(v,"INPUT",{class:!0,type:!0,id:!0,name:!0}),i=D(v),_=q(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(_)!=="svelte-144da9z"&&(_.textContent=f),v.forEach(d),t=D(h),p&&p.l(h),a=D(h),b&&b.l(h),l=A(),this.h()},h(){g(o,"class","searchbar svelte-1lgeke3"),g(o,"type","text"),g(o,"id","query"),g(o,"name","query"),g(_,"type","submit"),g(_,"class","svelte-1lgeke3")},m(h,v){Z(e,h,v),T(h,n,v),T(h,s,v),y(s,o),H(o,c[0]),y(s,i),y(s,_),T(h,t,v),p&&p.m(h,v),T(h,a,v),b&&b.m(h,v),T(h,l,v),r=!0,u||(m=[I(o,"input",c[5]),I(s,"submit",re(c[3]))],u=!0)},p(h,[v]){v&1&&o.value!==h[0]&&H(o,h[0]),h[2]?p||(p=F(),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null),h[1]?b?(b.p(h,v),v&2&&j(b,1)):(b=L(h),b.c(),j(b,1),b.m(l.parentNode,l)):b&&(ee(),C(b,1,1,()=>{b=null}),$())},i(h){r||(j(e.$$.fragment,h),j(b),r=!0)},o(h){C(e.$$.fragment,h),C(b),r=!1},d(h){h&&(d(n),d(s),d(t),d(a),d(l)),x(e,h),p&&p.d(h),b&&b.d(h),u=!1,ae(m)}}}function pe(c,e,n){let s;oe(c,ue,r=>n(7,s=r));let{data:o}=e,i="",_,f;async function t(r){let u=`${S.backend}/ontology/search/${r}`;return await(await fetch(u)).json()}async function a(){n(2,f=!0);const r=await t(i);n(1,_=r["@graph"]),r["@context"],n(2,f=!1),window.history.pushState("",`D3FEND search for: ${i}`,`/search/?query=${i}`)}ie(async()=>{console.dir(s),(s.query.query||s.query.q)&&(n(0,i=s.query.query||s.query.q),a())});function l(){i=this.value,n(0,i)}return c.$$set=r=>{"data"in r&&n(4,o=r.data)},[i,_,f,a,o,l]}class je extends Q{constructor(e){super(),V(this,e,pe,de,Y,{data:4})}}export{je as component};
