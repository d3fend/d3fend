import{S as K,i as P,s as X,H as ee,e as k,c as q,a as T,d as p,b as g,a0 as A,g as E,I as v,K as te,L as le,M as se,q as D,o as w,t as B,h as O,k as N,m as j,j as S,w as J,x as Q,y as V,B as W,X as Z,p as $,l as I,a1 as L,N as H,a2 as re,Y as ne,R as ae,v as oe,n as x}from"../chunks/index-a02da30e.js";/* empty css                                                     */import{c as R}from"../chunks/config-91979045.js";import"../chunks/navigation-0e6511d1.js";import{T as ie}from"../chunks/Title-1d23c88f.js";import{p as fe}from"../chunks/stores-cf129ad8.js";import"../chunks/singletons-d1fb5791.js";function ue(i){let l,r,s,n,u;const h=i[4].default,f=ee(h,i,i[3],null);return{c(){l=k("a"),r=k("button"),f&&f.c(),this.h()},l(t){l=q(t,"A",{href:!0,title:!0});var a=T(l);r=q(a,"BUTTON",{class:!0});var e=T(r);f&&f.l(e),e.forEach(p),a.forEach(p),this.h()},h(){g(r,"class",s=A(i[2])+" svelte-1lh49rh"),g(l,"href",n=R.prefix+"/ontology/describe/"+i[0]),g(l,"title",i[1])},m(t,a){E(t,l,a),v(l,r),f&&f.m(r,null),u=!0},p(t,[a]){f&&f.p&&(!u||a&8)&&te(f,h,t,t[3],u?se(h,t[3],a,null):le(t[3]),null),(!u||a&4&&s!==(s=A(t[2])+" svelte-1lh49rh"))&&g(r,"class",s),(!u||a&1&&n!==(n=R.prefix+"/ontology/describe/"+t[0]))&&g(l,"href",n),(!u||a&2)&&g(l,"title",t[1])},i(t){u||(D(f,t),u=!0)},o(t){w(f,t),u=!1},d(t){t&&p(l),f&&f.d(t)}}}function ce(i,l,r){let{$$slots:s={},$$scope:n}=l,{entity:u}=l,{title:h=""}=l,{size:f=""}=l;return i.$$set=t=>{"entity"in t&&r(0,u=t.entity),"title"in t&&r(1,h=t.title),"size"in t&&r(2,f=t.size),"$$scope"in t&&r(3,n=t.$$scope)},[u,h,f,n,s]}class _e extends K{constructor(l){super(),P(this,l,ce,ue,X,{entity:0,title:1,size:2})}}function M(i,l,r){const s=i.slice();return s[8]=l[r],s}function U(i,l,r){const s=i.slice();return s[11]=l[r],s[13]=r,s}function F(i){let l,r;return{c(){l=k("h3"),r=B("LOADING")},l(s){l=q(s,"H3",{});var n=T(l);r=O(n,"LOADING"),n.forEach(p)},m(s,n){E(s,l,n),v(l,r)},d(s){s&&p(l)}}}function G(i){let l,r,s,n,u,h,f=i[1],t=[];for(let e=0;e<f.length;e+=1)t[e]=C(M(i,f,e));const a=e=>w(t[e],1,1,()=>{t[e]=null});return{c(){l=k("h3"),r=B("Results for: "),s=B(i[0]),n=N(),u=k("table");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){l=q(e,"H3",{});var o=T(l);r=O(o,"Results for: "),s=O(o,i[0]),o.forEach(p),n=j(e),u=q(e,"TABLE",{class:!0});var c=T(u);for(let m=0;m<t.length;m+=1)t[m].l(c);c.forEach(p),this.h()},h(){g(u,"class","")},m(e,o){E(e,l,o),v(l,r),v(l,s),E(e,n,o),E(e,u,o);for(let c=0;c<t.length;c+=1)t[c].m(u,null);h=!0},p(e,o){if((!h||o&1)&&S(s,e[0]),o&2){f=e[1];let c;for(c=0;c<f.length;c+=1){const m=M(e,f,c);t[c]?(t[c].p(m,o),D(t[c],1)):(t[c]=C(m),t[c].c(),D(t[c],1),t[c].m(u,null))}for(x(),c=f.length;c<t.length;c+=1)a(c);$()}},i(e){if(!h){for(let o=0;o<f.length;o+=1)D(t[o]);h=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)w(t[o]);h=!1},d(e){e&&p(l),e&&p(n),e&&p(u),Z(t,e)}}}function he(i){let l=i[8]["@id"]+"",r;return{c(){r=B(l)},l(s){r=O(s,l)},m(s,n){E(s,r,n)},p(s,n){n&2&&l!==(l=s[8]["@id"]+"")&&S(r,l)},d(s){s&&p(r)}}}function Y(i){let l,r,s=i[11][0]+"",n,u,h=i[11][1]+"",f;return{c(){l=k("tr"),r=k("td"),n=B(s),u=k("td"),f=B(h),this.h()},l(t){l=q(t,"TR",{});var a=T(l);r=q(a,"TD",{class:!0,colspan:!0});var e=T(r);n=O(e,s),e.forEach(p),u=q(a,"TD",{class:!0});var o=T(u);f=O(o,h),o.forEach(p),a.forEach(p),this.h()},h(){g(r,"class","text-right text-bold predicate svelte-1lgeke3"),g(r,"colspan","2"),g(u,"class","object svelte-1lgeke3")},m(t,a){E(t,l,a),v(l,r),v(r,n),v(l,u),v(u,f)},p(t,a){a&2&&s!==(s=t[11][0]+"")&&S(n,s),a&2&&h!==(h=t[11][1]+"")&&S(f,h)},d(t){t&&p(l)}}}function C(i){let l,r,s,n,u,h,f;n=new _e({props:{size:"small",entity:i[8]["@id"],color:"#ccc",$$slots:{default:[he]},$$scope:{ctx:i}}});let t=Object.entries(i[8]),a=[];for(let e=0;e<t.length;e+=1)a[e]=Y(U(i,t,e));return{c(){l=k("tbody"),r=k("tr"),s=k("td"),J(n.$$.fragment),u=N();for(let e=0;e<a.length;e+=1)a[e].c();h=N(),this.h()},l(e){l=q(e,"TBODY",{class:!0});var o=T(l);r=q(o,"TR",{});var c=T(r);s=q(c,"TD",{colspan:!0,class:!0});var m=T(s);Q(n.$$.fragment,m),m.forEach(p),c.forEach(p),u=j(o);for(let b=0;b<a.length;b+=1)a[b].l(o);h=j(o),o.forEach(p),this.h()},h(){g(s,"colspan","3"),g(s,"class","font-medium subject svelte-1lgeke3"),g(l,"class","font-small svelte-1lgeke3")},m(e,o){E(e,l,o),v(l,r),v(r,s),V(n,s,null),v(l,u);for(let c=0;c<a.length;c+=1)a[c].m(l,null);v(l,h),f=!0},p(e,o){const c={};if(o&2&&(c.entity=e[8]["@id"]),o&16386&&(c.$$scope={dirty:o,ctx:e}),n.$set(c),o&2){t=Object.entries(e[8]);let m;for(m=0;m<t.length;m+=1){const b=U(e,t,m);a[m]?a[m].p(b,o):(a[m]=Y(b),a[m].c(),a[m].m(l,h))}for(;m<a.length;m+=1)a[m].d(1);a.length=t.length}},i(e){f||(D(n.$$.fragment,e),f=!0)},o(e){w(n.$$.fragment,e),f=!1},d(e){e&&p(l),W(n),Z(a,e)}}}function me(i){let l,r,s,n,u,h,f,t,a,e,o,c,m;l=new ie({props:{title:"Search"}});let b=i[2]&&F(),d=i[1]&&G(i);return{c(){J(l.$$.fragment),r=N(),s=k("form"),n=k("input"),u=N(),h=k("button"),f=B("Search"),t=N(),b&&b.c(),a=N(),d&&d.c(),e=I(),this.h()},l(_){Q(l.$$.fragment,_),r=j(_),s=q(_,"FORM",{});var y=T(s);n=q(y,"INPUT",{class:!0,type:!0,id:!0,name:!0}),u=j(y),h=q(y,"BUTTON",{type:!0,class:!0});var z=T(h);f=O(z,"Search"),z.forEach(p),y.forEach(p),t=j(_),b&&b.l(_),a=j(_),d&&d.l(_),e=I(),this.h()},h(){g(n,"class","searchbar svelte-1lgeke3"),g(n,"type","text"),g(n,"id","query"),g(n,"name","query"),g(h,"type","submit"),g(h,"class","svelte-1lgeke3")},m(_,y){V(l,_,y),E(_,r,y),E(_,s,y),v(s,n),L(n,i[0]),v(s,u),v(s,h),v(h,f),E(_,t,y),b&&b.m(_,y),E(_,a,y),d&&d.m(_,y),E(_,e,y),o=!0,c||(m=[H(n,"input",i[4]),H(s,"submit",re(i[3]))],c=!0)},p(_,[y]){y&1&&n.value!==_[0]&&L(n,_[0]),_[2]?b||(b=F(),b.c(),b.m(a.parentNode,a)):b&&(b.d(1),b=null),_[1]?d?(d.p(_,y),y&2&&D(d,1)):(d=G(_),d.c(),D(d,1),d.m(e.parentNode,e)):d&&(x(),w(d,1,1,()=>{d=null}),$())},i(_){o||(D(l.$$.fragment,_),D(d),o=!0)},o(_){w(l.$$.fragment,_),w(d),o=!1},d(_){W(l,_),_&&p(r),_&&p(s),_&&p(t),b&&b.d(_),_&&p(a),d&&d.d(_),_&&p(e),c=!1,ne(m)}}}function pe(i,l,r){let s;ae(i,fe,e=>r(6,s=e));let{query:n=""}=l,u,h;async function f(e){let o=R.backend+"/ontology/search/"+e;return await(await fetch(o)).json()}async function t(){r(2,h=!0);let e=await f(n);r(1,u=e["@graph"]),r(2,h=!1),window.history.pushState("",`D3FEND search for: ${n}`,`/search/?query=${n}`)}oe(async()=>{console.dir(s),(s.query.query||s.query.q)&&(r(0,n=s.query.query||s.query.q),t())});function a(){n=this.value,r(0,n)}return i.$$set=e=>{"query"in e&&r(0,n=e.query)},[n,u,h,t,a]}class Ee extends K{constructor(l){super(),P(this,l,pe,me,X,{query:0})}}export{Ee as default};
